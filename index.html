<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Labubu Queen Pro V6.4</title>
    
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">

    <style>
        /* --- V6.4 æ¨™é¡Œå †ç–Šä¿®å¾©ç‰ˆ (Vertical Brand Layout) --- */
        
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        :root {
            --primary: #4A148C;
            --primary-light: #7c43bd;
            --accent: #D4AF37; 
            --danger: #c62828;
            --success: #10B981;
            
            --gradient-purple: linear-gradient(135deg, #4C1D95 0%, #7C3AED 100%);
            
            --bg-color: #F5F3FF;
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-dark: #1A237E;
            --text-grey: #6B7280;
            --shadow: 0 4px 12px rgba(0,0,0,0.05);
            --accent-gold-text: #D97706;
            
            --glass-bg: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(255, 255, 255, 1);
            --glass-shadow: 0 10px 40px rgba(31, 38, 135, 0.08);
        }

        body {
            background: 
                radial-gradient(at 0% 0%, rgba(124, 58, 237, 0.1) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(252, 211, 77, 0.15) 0px, transparent 50%),
                var(--bg-color);
            color: var(--text-dark);
            margin: 0; padding: 0;
            width: 100%;
            overflow-x: hidden;
            display: flex; justify-content: center;
        }

        .app-container {
            width: 100%; 
            max-width: 480px; 
            min-height: 100vh;
            padding: 20px 20px 100px 20px;
        }

        /* --- [V6.4 é‡é»ä¿®æ”¹] Header ä½ˆå±€ --- */
        header { 
            display: flex; 
            align-items: center; /* å‚ç›´å±…ä¸­å°é½Š */
            justify-content: space-between; /* å·¦å³æ¨é–‹ */
            margin-bottom: 25px; 
            padding-top: 10px; 
        }
        
        /* æ–°å¢ï¼šå“ç‰Œæ–‡å­—å®¹å™¨ (å‚ç›´æ’åˆ—) */
        .brand-wrapper {
            display: flex;
            flex-direction: column; /* å¼·åˆ¶ä¸Šä¸‹æ’åˆ— */
            justify-content: center;
            align-items: flex-start; /* é å·¦å°é½Š */
        }
        
        h1, .page-title { 
            margin: 0; 
            font-size: 24px; 
            line-height: 1.2; /* ç·Šæ¹Šè¡Œé«˜ */
            font-weight: 900; 
            background: var(--gradient-purple);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 0.5px;
            text-transform: capitalize;
        }
        
        /* å‰¯æ¨™é¡Œæ¨£å¼èª¿æ•´ */
        .subtitle {
            font-size: 10px; /* ç¨å¾®ç¸®å°ä»¥é…åˆæ’ç‰ˆ */
            color: var(--text-grey);
            letter-spacing: 1px;
            text-transform: uppercase;
            font-weight: 700;
            margin-top: 2px; /* èˆ‡æ¨™é¡Œçš„è·é›¢ */
            white-space: nowrap; /* ä¸å‡†æ›è¡Œ */
        }

        /* æ¬¡é é¢ Header */
        .sub-header {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin-bottom: 25px;
            padding-top: 10px;
            height: 40px;
        }

        .back-nav {
            position: absolute;
            left: 0;
            background: none;
            border: none;
            display: flex;
            align-items: center;
            font-size: 15px;
            font-weight: 600;
            color: #7C3AED;
            cursor: pointer;
            padding: 10px 10px 10px 0;
            outline: none;
        }
        .back-nav:active { opacity: 0.6; transform: scale(0.95); }

        /* User Badge (ç©åˆ†æŒ‰éˆ•) */
        .user-badge {
            flex-shrink: 0; /* ç¦æ­¢è¢«å£“ç¸® */
            background: white; 
            padding: 4px 10px 4px 4px;
            border-radius: 30px; 
            box-shadow: var(--shadow); 
            cursor: pointer; 
            border: 1px solid #E5E7EB;
            margin-left: 10px; /* èˆ‡å·¦é‚Šæ–‡å­—ä¿æŒè·é›¢ */
        }
        .user-avatar-mini { width: 28px; height: 28px; border-radius: 50%; background: #eee; margin-right: 6px; object-fit: cover; }
        .user-score-mini { font-weight: 800; color: #4C1D95; font-size: 13px; }

        /* å¡ç‰‡ç³»çµ± */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-radius: 20px; padding: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.04);
            border: 1px solid rgba(255, 255, 255, 1);
            margin-bottom: 20px;
            width: 100%; overflow: hidden;
        }

        .labubu-card {
            background: var(--gradient-purple);
            color: white; cursor: pointer;
            box-shadow: 0 10px 25px rgba(124, 58, 237, 0.25); border: none;
        }
        .labubu-card h2 { font-size: 11px; opacity: 0.9; margin: 0; display: flex; align-items: center; letter-spacing: 1.5px; color: #E9D5FF; }
        .labubu-card p { font-size: 16px; font-weight: 700; line-height: 1.5; margin: 12px 0; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }

        .section-header {
            font-size: 12px; font-weight: 800; color: #9CA3AF; margin: 30px 0 10px 5px; letter-spacing: 1.5px; text-transform: uppercase; display: flex; align-items: center;
        }
        .section-header::before {
            content: ''; display: inline-block; width: 6px; height: 6px; background: #D97706; border-radius: 50%; margin-right: 8px;
        }

        /* åˆ—è¡¨é …ç›® (V5.7 ç·Šæ¹Š Grid) */
        .daily-item, .checklist-item { 
            display: grid; 
            grid-template-columns: 24px 1fr; 
            gap: 10px; 
            align-items: center; 
            padding: 14px 12px; 
            background: white; 
            border-radius: 14px; 
            margin-bottom: 10px; 
            box-shadow: 0 2px 6px rgba(0,0,0,0.02);
            border: 1px solid rgba(0,0,0,0.03);
            width: 100%;
            transition: all 0.2s;
        }
        
        .daily-item:active, .checklist-item:active { transform: scale(0.98); background: #F9FAFB; }

        .night-item { background: #FFF5F5; border: 1px solid #FEE2E2; }
        .night-item span { color: #991B1B; }
        .night-item input { accent-color: #EF4444; }

        .daily-item input, .checklist-item input { 
            width: 20px; height: 20px; accent-color: #7C3AED; margin: 0; justify-self: center; transform: scale(1.15);
        }
        .daily-item span, .checklist-item span {
            font-size: 15px; font-weight: 500; line-height: 1.4; text-align: left; color: #1F2937; word-break: break-word; white-space: normal;
        }
        
        /* æˆ°è¡“å·¥å…·ç®± */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px; }
        .feature-card {
            background: white; border-radius: 18px; padding: 16px 10px; text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.04); cursor: pointer; border: 1px solid white;
            transition: all 0.2s;
        }
        .feature-card:active { transform: scale(0.96); }
        .feature-card i { font-size: 26px; display: block; margin-bottom: 8px; }
        .feature-card h3 { margin: 0; font-size: 14px; font-weight: 700; color: #1F2937; }
        .feature-card span { font-size: 11px; color: #6B7280; display: block; margin-top: 4px; font-weight: 500; }
        
        .fc-invest i { color: #F59E0B; } .fc-radar i { color: #EC4899; }
        .fc-auditor i { color: #10B981; } .fc-locker i { color: #3B82F6; }

        /* æ¸¬é©—é¸é … */
        .quiz-option {
            display: block; width: 100%; padding: 16px 14px; margin-bottom: 12px; border-radius: 14px;
            border: 2px solid #eee; background: white; text-align: left; font-size: 15px; cursor: pointer; transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02); font-weight: 500; line-height: 1.5; white-space: normal; 
        }
        .quiz-option.correct { border-color: var(--success); background: #ECFDF5; color: #065F46; font-weight: 600; }
        .quiz-option.wrong { border-color: var(--danger); background: #FEF2F2; color: #991B1B; }

        .mode-switch { display: flex; background: #E5E7EB; border-radius: 16px; padding: 4px; margin-bottom: 20px; box-shadow: inset 0 1px 3px rgba(0,0,0,0.05); }
        .mode-btn { flex: 1; padding: 10px; text-align: center; border-radius: 12px; font-size: 13px; font-weight: 600; cursor: pointer; color: #6B7280; transition: all 0.2s; }
        .mode-btn.active { background: white; color: #7C3AED; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transform: scale(1.02); }

        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }
        .shake { animation: shake 0.4s; }

        /* å°èˆªåˆ— */
        .nav-bar {
            position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%);
            width: calc(100% - 40px); max-width: 400px;
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border-radius: 35px; display: flex; justify-content: space-around; padding: 12px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.12); border: 1px solid rgba(255,255,255,0.6); z-index: 100;
        }
        .nav-item { text-align: center; color: #9CA3AF; font-size: 10px; cursor: pointer; transition: color 0.3s; }
        .nav-item.active { color: #7C3AED; }
        .nav-item i { display: block; font-size: 22px; margin-bottom: 3px; }

        /* å…ƒä»¶ */
        textarea { width: 100%; height: 100px; padding: 15px; border-radius: 16px; border: 1px solid #E5E7EB; outline: none; resize: none; font-size: 15px; background: #F9FAFB; transition: background 0.2s; }
        textarea:focus { background: white; border-color: #7C3AED; }
        .invest-btn { width: 100%; display: block; padding: 14px; background: var(--gradient-purple); color: white; border: none; border-radius: 16px; font-weight: 700; cursor: pointer; margin-top: 8px; font-size: 15px; box-shadow: 0 4px 15px rgba(124, 58, 237, 0.3); }
        .invest-input { width: 100%; padding: 14px; border-radius: 14px; border: 1px solid #E5E7EB; margin-bottom: 12px; font-size: 15px; background: #F9FAFB; outline: none; }
        
        /* æª”æ¡ˆé  */
        .score-circle { width: 120px; height: 120px; border-radius: 50%; background: conic-gradient(#7C3AED 0% 0%, #eee 0% 100%); margin: 0 auto 15px auto; position: relative; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(124, 58, 237, 0.15); }
        .score-inner { width: 100px; height: 100px; border-radius: 50%; background: white; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .score-num { font-size: 36px; font-weight: 900; color: #7C3AED; letter-spacing: -1px; }
        .score-label { font-size: 11px; color: #9CA3AF; font-weight: 600; letter-spacing: 1px; margin-top: -5px; }
        .log-list { max-height: 250px; overflow-y: auto; margin-top: 10px; }
        .deduction-alert { background: #FEF2F2; border: 1px solid #FECACA; color: #991B1B; padding: 12px; border-radius: 12px; margin-top: 15px; display: none; font-size: 13px; line-height: 1.5; }

        .page { display: none; animation: fadeIn 0.3s cubic-bezier(0.25, 1, 0.5, 1); }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>

<div class="app-container">
    
    <div id="page-home" class="page active">
        <header>
            <div class="brand-wrapper">
                <h1>Labubu Queen</h1>
                <div class="subtitle">High Value Strategy</div>
            </div>
            <div class="user-badge" onclick="navTo('profile')">
                <img src="icon.png" class="user-avatar-mini" onerror="this.src='https://via.placeholder.com/30'">
                <div class="user-score-mini" id="mini-score">0</div>
            </div>
        </header>

        <div class="glass-card labubu-card" onclick="refreshQuote()">
            <h2><i class="fas fa-crown"></i>&nbsp; Queen's Mindset</h2>
            <p id="daily-quote">"ç”·äººæŠ•è³‡åœ¨å“ªè£¡ï¼Œå¿ƒå°±åœ¨å“ªè£¡ã€‚"</p>
        </div>

        <div class="section-header">Daily Ritual æ™¨é–“å„€å¼</div>
        <div class="glass-card" id="morning-ritual">
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('æ ¸å¿ƒè‡ªä¿¡ç¢ºèª', 10, this)">
                <span>ğŸ‘‘ æ ¸å¿ƒè‡ªä¿¡ï¼šæˆ‘æ˜¯ç¨ä¸€ç„¡äºŒçš„çå“</span>
            </div>
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('æƒ…ç·’è­·ç›¾é–‹å•Ÿ', 10, this)">
                <span>ğŸ›¡ï¸ æƒ…ç·’è­·ç›¾ï¼šä¸éš¨ä»–äººèµ·èˆï¼Œä¿æŒç©©å®š</span>
            </div>
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('å¤–è²Œç®¡ç†ç¢ºèª', 10, this)">
                <span>ğŸ’„ å¤–è²Œè³‡ç”¢ï¼šå¦å®¹ç©¿æ­é”åˆ°æˆ°é¬¥ç‹€æ…‹</span>
            </div>
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('å†¥æƒ³èˆ‡æ„Ÿæ©', 10, this)">
                <span>ğŸ§˜â€â™€ï¸ èƒ½é‡æ ¡æº–ï¼šæ—©æ™¨å†¥æƒ³èˆ‡æ„Ÿæ©ç·´ç¿’</span>
            </div>
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('çŸ¥è­˜è¼¸å…¥', 10, this)">
                <span>ğŸ“– è…¦è¢‹å‡ç´šï¼šé–±è®€æˆ–å­¸ç¿’ 15 åˆ†é˜</span>
            </div>
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('å§¿æ…‹æ ¡æ­£', 10, this)">
                <span>ğŸ’ƒ èº«é«”èªè¨€ï¼šæŠ¬é ­æŒºèƒ¸ï¼Œçœ¼ç¥å …å®š</span>
            </div>
        </div>

        <div class="section-header">Tools æˆ°è¡“å·¥å…·</div>
        <div class="grid">
            <div class="feature-card fc-invest" onclick="navTo('invest')">
                <i class="fas fa-hand-holding-usd"></i>
                <h3>æŠ•è³‡è¨˜å¸³</h3>
                <span>(+10åˆ†)</span>
            </div>
            <div class="feature-card fc-radar" onclick="navTo('radar')">
                <i class="fas fa-radar"></i>
                <h3>å„ªè³ªç”·é›·é”</h3>
                <span>ç¯©é¸é«˜è³‡ç”¢</span>
            </div>
            <div class="feature-card fc-auditor" onclick="navTo('auditor')">
                <i class="fas fa-comments"></i>
                <h3>è¨Šæ¯å¯©è¨ˆ</h3>
                <span>é˜²æ­¢ä½ä½</span>
            </div>
            <div class="feature-card fc-locker" onclick="navTo('locker')">
                <i class="fas fa-snowflake"></i>
                <h3>æƒ…ç·’å†·å‡åº«</h3>
                <span>(+5åˆ†)</span>
            </div>
        </div>
        
        <div class="glass-card" style="margin-top: 20px; text-align: center; cursor: pointer; border: 2px solid #7C3AED; background: rgba(124, 58, 237, 0.05);" onclick="navTo('dojo')">
            <div style="display:flex; align-items:center; justify-content:center; color:#7C3AED; font-weight:bold;">
                <i class="fas fa-chess-queen" style="font-size: 20px; margin-right:10px;"></i>
                <span>é€²å…¥ä¿®ç…‰é“å ´ (åˆ·é¡Œæ¨¡å¼)</span>
            </div>
        </div>
    </div>

    <div id="page-profile" class="page">
        <div class="sub-header">
            <button class="back-nav" onclick="navTo('home')"><i class="fas fa-arrow-left"></i> è¿”å›</button>
            <div class="page-title">Queen's Profile</div>
        </div>
        
        <div class="glass-card" style="text-align: center; padding-top:30px;">
            <div class="score-circle" id="score-ring">
                <div class="score-inner">
                    <div class="score-num" id="profile-score">0</div>
                    <div class="score-label">POINTS</div>
                </div>
            </div>
            <div id="score-comment" style="font-size:16px; font-weight:800; margin-top:15px; color:#7C3AED;"></div>
            
            <div id="deduction-box" class="deduction-alert">
                <strong>âš ï¸ æ‰£åˆ†è­¦å ±ï¼š</strong><br>
                <span id="deduction-reason"></span>
            </div>
        </div>

        <div class="section-header">Night Review æ™šé–“å¾©ç›¤</div>
        <div class="daily-item night-item">
            <input type="checkbox" onchange="updateScore('è¦–å§¦ä»–ç¤¾ç¾¤', -20, this)">
            <span>ğŸ¥€ å¿ä¸ä½å»è¦–å§¦ä»–çš„ç¤¾ç¾¤ (-20)</span>
        </div>
        <div class="daily-item night-item">
            <input type="checkbox" onchange="updateScore('ä¸»å‹•å‚³ä½ä½è¨Šæ¯', -30, this)">
            <span>ğŸ¥€ æ²’å¿ä½ä¸»å‹•å‚³äº†è¨å¥½è¨Šæ¯ (-30)</span>
        </div>
        <div class="daily-item night-item">
            <input type="checkbox" onchange="updateScore('æƒ…ç·’å¤±æ§', -20, this)">
            <span>ğŸ¥€ æƒ…ç·’å¤±æ§/å¤§åµå¤§é¬§ (-20)</span>
        </div>
        <div class="daily-item night-item">
            <input type="checkbox" onchange="updateScore('éåº¦è§£é‡‹', -15, this)">
            <span>ğŸ¥€ å®³æ€•è¢«èª¤æœƒï¼Œè§£é‡‹äº†ä¸€å¤§å † (-15)</span>
        </div>
        <div class="daily-item night-item">
            <input type="checkbox" onchange="updateScore('æ‚£å¾—æ‚£å¤±', -20, this)">
            <span>ğŸ¥€ å› ç‚ºä»–æ²’å›è¨Šæ¯è€Œç„¦æ…® (-20)</span>
        </div>
        <div class="daily-item night-item">
            <input type="checkbox" onchange="updateScore('è‡ªæˆ‘æ‡·ç–‘', -10, this)">
            <span>ğŸ¥€ è¦ºå¾—è‡ªå·±ä¸å¤ å¥½/é…ä¸ä¸Š (-10)</span>
        </div>

        <div class="section-header">Activity Log ç©åˆ†ç´€éŒ„</div>
        <div class="glass-card log-list" id="score-log"></div>
        
        <div style="text-align:center; padding-bottom:20px;">
             <span style="font-size:12px; color:#aaa; cursor:pointer;" onclick="resetDaily()">[é‡ç½®ä»Šæ—¥æ•¸æ“š]</span>
        </div>
    </div>

    <div id="page-invest" class="page">
        <div class="sub-header">
            <button class="back-nav" onclick="navTo('home')"><i class="fas fa-arrow-left"></i> è¿”å›</button>
            <div class="page-title">æŠ•è³‡è¨˜å¸³æœ¬</div>
        </div>
        <div class="glass-card">
            <input type="text" class="invest-input" id="invest-desc" placeholder="é …ç›® (ä¾‹: æ¥é€ã€ç¦®ç‰©ã€è«‹å®¢)">
            <select class="invest-input" id="invest-type">
                <option value="money">ğŸ’¸ é‡‘éŒ¢æŠ•å…¥ (æœ€å¯¦éš›)</option>
                <option value="time">â³ æ™‚é–“æŠ•å…¥</option>
                <option value="effort">â¤ï¸ æƒ…ç·’/å‹åŠ›æŠ•å…¥</option>
            </select>
            <input type="number" class="invest-input" id="invest-val" placeholder="ä¼°ç®—åƒ¹å€¼ (TWD)">
            <button class="invest-btn" onclick="addInvest()">å¯«å…¥ç´€éŒ„ (+10åˆ†)</button>
        </div>
        <div class="section-header">History æ­·å²ç´€éŒ„</div>
        <div id="invest-history"></div>
    </div>

    <div id="page-radar" class="page">
        <div class="sub-header">
            <button class="back-nav" onclick="navTo('home')"><i class="fas fa-arrow-left"></i> è¿”å›</button>
            <div class="page-title">å„ªè³ªç”·é›·é”</div>
        </div>
        <div id="checklist-container"></div>
        <div id="radar-result" class="glass-card" style="display:none; text-align:center; font-weight:bold; margin-top:20px;"></div>
    </div>

    <div id="page-auditor" class="page">
        <div class="sub-header">
            <button class="back-nav" onclick="navTo('home')"><i class="fas fa-arrow-left"></i> è¿”å›</button>
            <div class="page-title">è¨Šæ¯å¯©è¨ˆå“¡</div>
        </div>
        <div class="glass-card">
            <p style="font-size:13px; color:#666; margin-top:0;">æƒ³å‚³è¨Šæ¯å‰ï¼Œå…ˆè²¼åœ¨é€™è£¡æª¢æŸ¥æ˜¯å¦ç‚ºã€Œä½ä½ã€ç™¼è¨€ã€‚</p>
            <textarea id="msg-input" placeholder="è²¼ä¸Šå¦³æƒ³å‚³çµ¦ä»–çš„è¨Šæ¯..." oninput="analyzeMessage()"></textarea>
            <div id="msg-feedback" style="font-size:14px; margin-top:10px; font-weight:bold; min-height:20px;"></div>
        </div>
    </div>

    <div id="page-locker" class="page">
        <div class="sub-header">
            <button class="back-nav" onclick="navTo('home')"><i class="fas fa-arrow-left"></i> è¿”å›</button>
            <div class="page-title">æƒ…ç·’å†·å‡åº«</div>
        </div>
        <div class="glass-card" style="text-align: center; padding: 40px 20px;">
            <div style="font-size: 14px; color: #666; margin-bottom: 20px;">æƒ³ç™¼ç˜‹ï¼Ÿæƒ³ç½µäººï¼Ÿå…ˆæŒ‰ä¸‹å»å†·éœä¸€ä¸‹ã€‚</div>
            <div id="timer-display" style="font-size: 60px; font-weight: 800; color: #7C3AED; font-variant-numeric: tabular-nums;">00:00:00</div>
            
            <div style="display:grid; gap:10px; margin-top:30px;">
                <button id="btn-freeze-short" class="invest-btn" onclick="startFreeze(10)" style="background:#06B6D4;">âš¡ï¸ é«”é©—å†·å‡ (10ç§’)</button>
                <button id="btn-freeze-long" class="invest-btn" onclick="startFreeze(3600)" style="background:#EF4444;">ğŸ”’ æ­£å¼å†·å‡ (1å°æ™‚)</button>
            </div>
            
            <p id="freeze-msg" style="display:none; margin-top:20px; color:#EF4444; font-weight:bold;">â„ï¸ å†·å‡ä¸­...è«‹æ”¾ä¸‹æ‰‹æ©Ÿå»åšåˆ¥çš„äº‹ (+5åˆ†)</p>
        </div>
    </div>

    <div id="page-dojo" class="page">
        <div class="sub-header">
            <button class="back-nav" onclick="navTo('home')"><i class="fas fa-arrow-left"></i> è¿”å›</button>
            <div class="page-title">ä¿®ç…‰é“å ´</div>
        </div>
        
        <div class="mode-switch">
            <div class="mode-btn active" id="btn-mode-learn" onclick="setDojoMode('learn')">ğŸ“– å­¸ç¿’æ¨¡å¼</div>
            <div class="mode-btn" id="btn-mode-quiz" onclick="setDojoMode('quiz')">âš”ï¸ å¯¦æˆ°æ¸¬é©—</div>
        </div>

        <div class="glass-card" style="min-height: 300px; display:flex; flex-direction:column;" id="dojo-card">
            <div style="flex:1;">
                <span style="font-size:10px; color:#aaa; letter-spacing:1px; font-weight:700;">QUESTION</span>
                <div id="dojo-q" style="font-size: 18px; font-weight: bold; margin: 10px 0 25px 0; line-height: 1.5; color: #333;">é¡Œç›®è¼‰å…¥ä¸­...</div>
                
                <div id="learn-area">
                    <button id="btn-show-ans" class="invest-btn" style="background:white; color:#7C3AED; border:2px solid #7C3AED;" onclick="showAnswer()">æŸ¥çœ‹å¥³ç‹å›è¦†</button>
                    <div id="dojo-a" style="margin-top:20px; text-align:left; display:none; background:#F3F4F6; padding:20px; border-radius:12px; color:#374151; font-size:15px; line-height:1.6; border-left: 4px solid #7C3AED;"></div>
                </div>

                <div id="quiz-area" style="display:none;">
                    <div id="quiz-options"></div>
                    <div id="quiz-feedback" style="margin-top:15px; font-weight:bold; text-align:center;"></div>
                </div>
            </div>

            <div style="display:flex; justify-content:space-between; margin-top:25px; align-items:center; border-top:1px solid #eee; padding-top:15px;">
                <button onclick="nextQuiz(-1)" style="background:none; border:none; color:#999; cursor:pointer; font-weight:600;">ä¸Šä¸€é¡Œ</button>
                <span id="quiz-counter" style="font-size:12px; color:#aaa; font-weight:600;">1 / 50</span>
                <button onclick="nextQuiz(1)" style="background:none; border:none; color:#7C3AED; font-weight:800; cursor:pointer;">ä¸‹ä¸€é¡Œ</button>
            </div>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="navTo('home')">
            <i class="fas fa-home"></i>é¦–é 
        </div>
        <div class="nav-item" onclick="navTo('profile')">
            <i class="fas fa-user-circle"></i>æª”æ¡ˆ
        </div>
        <div class="nav-item" onclick="navTo('invest')">
            <i class="fas fa-wallet"></i>æŠ•è³‡
        </div>
        <div class="nav-item" onclick="navTo('dojo')">
            <i class="fas fa-chess-queen"></i>é“å ´
        </div>
    </div>

</div>

<script>
    // ---------------------------------------------------------
    // 1. æ ¸å¿ƒè³‡æ–™é‚è¼¯ (Core Logic)
    // ---------------------------------------------------------
    let todayData = JSON.parse(localStorage.getItem('queen_daily')) || resetDailyData();
    function resetDailyData() { return { date: new Date().toLocaleDateString(), score: 0, logs: [] }; }

    if(todayData.date !== new Date().toLocaleDateString()) { todayData = resetDailyData(); saveData(); }

    function saveData() { localStorage.setItem('queen_daily', JSON.stringify(todayData)); updateProfileUI(); }

    function updateScore(action, points, element) {
        if(element && element.type === 'checkbox') { if(!element.checked) points = -points; }
        todayData.score += points;
        todayData.logs.unshift({ action, points, time: new Date().toLocaleTimeString('zh-TW', {hour:'2-digit', minute:'2-digit'}) });
        saveData();
    }

    function updateProfileUI() {
        const score = todayData.score;
        document.getElementById('profile-score').innerText = score;
        document.getElementById('mini-score').innerText = score;
        
        let percent = Math.min(Math.max(score, 0), 100);
        let color = score < 0 ? '#EF4444' : '#7C3AED';
        
        document.getElementById('score-ring').style.background = `conic-gradient(${color} ${percent}%, #E5E7EB ${percent}% 100%)`;

        const comment = document.getElementById('score-comment');
        if(score >= 80) { comment.innerText = "ğŸ‘‘ å¥³ç‹é™è‡¨ï¼ç‹€æ…‹æ¥µä½³"; comment.style.color = "#7C3AED"; }
        else if(score >= 50) { comment.innerText = "âœ¨ ä¿æŒå„ªé›…ï¼Œç¹¼çºŒåŠªåŠ›"; comment.style.color = "#F59E0B"; }
        else if(score >= 0) { comment.innerText = "ğŸ›¡ï¸ éœ€è¦åŠ å¼·é˜²ç¦¦"; comment.style.color = "#6B7280"; }
        else { comment.innerText = "âš ï¸ è­¦å ±ï¼è«‹ç«‹å³åœæ­¢ä½ä½è¡Œç‚º"; comment.style.color = "#EF4444"; }

        const logList = document.getElementById('score-log');
        logList.innerHTML = todayData.logs.map(l => 
            `<div class="daily-item" style="display:flex; justify-content:space-between; grid-template-columns:none; padding:12px; margin-bottom:6px;">
                <span style="font-size:12px;color:#888;">${l.time}</span>
                <span style="flex:1; margin-left:10px;">${l.action}</span>
                <span style="font-weight:bold; color:${l.points > 0 ? '#10B981':'#EF4444'}">${l.points > 0 ? '+' : ''}${l.points}</span>
             </div>`
        ).join('');

        const negatives = todayData.logs.filter(l => l.points < 0);
        const deductBox = document.getElementById('deduction-box');
        if(negatives.length > 0) {
            deductBox.style.display = 'block';
            document.getElementById('deduction-reason').innerText = [...new Set(negatives.map(n => n.action))].join('ã€');
        } else { deductBox.style.display = 'none'; }
    }

    function resetDaily() {
        if(confirm("ç¢ºå®šé‡ç½®ä»Šæ—¥æ‰€æœ‰æ•¸æ“šï¼Ÿ")) {
            todayData = resetDailyData();
            document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);
            saveData();
        }
    }
    updateProfileUI();

    // ---------------------------------------------------------
    // 2. å°èˆªç³»çµ± (Navigation)
    // ---------------------------------------------------------
    function navTo(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('page-' + pageId).classList.add('active');
        window.scrollTo(0,0);
        
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        if(pageId === 'home') document.querySelectorAll('.nav-item')[0].classList.add('active');
        if(pageId === 'profile') document.querySelectorAll('.nav-item')[1].classList.add('active');
        if(pageId === 'invest') document.querySelectorAll('.nav-item')[2].classList.add('active');
        if(pageId === 'dojo') document.querySelectorAll('.nav-item')[3].classList.add('active');
    }

    // ---------------------------------------------------------
    // 3. å„é …åŠŸèƒ½æ¨¡çµ„
    // ---------------------------------------------------------
    const quotes = [
        "æˆ‘æ˜¯å®šåƒ¹ 450 çš„é™é‡ç›²ç›’ï¼Œå«Œè²´å°±åˆ¥è²·ã€‚", "ä¸è¦ç•¶å…è²»è©¦ç”¨å“ï¼Œè¦ç•¶éœ€é ç´„çš„å¥¢ä¾ˆå“ã€‚",
        "ç”·äººçš„æŠ±æ€¨æ˜¯æŠ•å…¥æˆæœ¬çš„é–‹å§‹ã€‚", "æ©Ÿç‡åªæœ‰ 1.4%ï¼Œä»–èƒ½ç´„åˆ°æˆ‘æ˜¯é‹æ°£å¥½ã€‚",
        "å¼·è€…å¾ä¸è‡ªè­‰ï¼Œåªçœ‹çµæœã€‚", "æº«æŸ”æ˜¯ä¿®é¤Šï¼Œä¸å¥½æƒ¹æ˜¯åŸå‰‡ã€‚",
        "éŒ¢åœ¨å“ªè£¡ï¼Œå¿ƒå°±åœ¨å“ªè£¡ã€‚", "çœ‹ä»–ç‚ºäº†å¦³æ”¾æ£„äº†ä»€éº¼ã€‚",
        "æƒ…ç·’ç©©å®šæ˜¯ç‚ºäº†è®“è‡ªå·±å„ªé›…ã€‚", "å°ä»–å¥½æ˜¯çå‹µï¼Œä¸æ˜¯ç¾©å‹™ã€‚",
        "å¦³çš„åº•ç·šæ±ºå®šäº†ä»–çš„ä¸Šé™ã€‚", "æ•¢æ–¼å¤±å»ï¼Œæ‰èƒ½çœŸæ­£æ“æœ‰ã€‚",
        "å¹´è–ª 400 è¬æ²’ç”¨ï¼Œé¡˜æ„èŠ±æ‰ç®—æ•¸ã€‚", "è¦åšä»–çš„åˆå¤¥äººï¼Œä¸åšè³¢å…§åŠ©ã€‚",
        "ä¿æŒ 30% çš„ç¥ç§˜æ„Ÿã€‚", "å¿™ç¢Œæ˜¯é«˜åƒ¹å€¼çš„è­‰æ˜ã€‚",
        "ç”·äººæ˜¯çµäººï¼Œçµç‰©ä¸è·³ç¶²ã€‚", "çœ‹æ‡‚æ•¸æ“šæ‰ä¸æœƒè¼¸ã€‚",
        "å¦³çš„æ™‚é–“æ¯”ä»–çš„éŒ¢æ›´è²´ã€‚", "æ²’é—œä¿‚æ˜¯åœ¨é™ä½èº«åƒ¹ã€‚",
        "æˆ’æ‰å°åƒåœ¾ç”·çš„åŒæƒ…ã€‚", "é¡åƒæ³•å‰‡ï¼šä»–å†·å¦³å°±å†·ã€‚",
        "ä¸è¦è§£é‡‹ã€‚", "ç¨ç«‹æ˜¯åº•æ°£ã€‚", "å¦³å€¼å¾—æœ€å¥½çš„ã€‚",
        "ç¯©é¸å¤§æ–¼æ”¹è®Šã€‚", "æ‰¿è«¾æ˜¯æœŸè²¨ï¼Œè¡Œå‹•æ˜¯ç¾è²¨ã€‚",
        "åšä¸€å€‹è®“ä»–æ€•å¤±å»çš„å¥³äººã€‚", "å¦³æ˜¯çå“ã€‚", "æˆ‘å¯ä»¥æ„›ä½ ï¼Œä¹Ÿå¯ä»¥æ›äº†ä½ ã€‚"
    ];
    function refreshQuote() { document.getElementById('daily-quote').innerText = '"' + quotes[Math.floor(Math.random() * quotes.length)] + '"'; }
    refreshQuote();

    let investments = JSON.parse(localStorage.getItem('queen_investments')) || [];
    renderInvest();

    function addInvest() {
        const desc = document.getElementById('invest-desc').value;
        const val = document.getElementById('invest-val').value;
        const type = document.getElementById('invest-type').value;
        if(!desc || !val) return alert("è«‹å¡«å¯«å®Œæ•´");
        investments.unshift({ id: Date.now(), desc, type, val, date: new Date().toLocaleDateString() });
        localStorage.setItem('queen_investments', JSON.stringify(investments));
        updateScore('ç´€éŒ„æŠ•è³‡', 10); renderInvest();
        document.getElementById('invest-desc').value = ''; document.getElementById('invest-val').value = '';
    }
    function renderInvest() {
        const list = document.getElementById('invest-history');
        if(investments.length === 0) { list.innerHTML = '<div style="color:#ccc;text-align:center;padding:20px;">å°šç„¡ç´€éŒ„ï¼Œè«‹è§€å¯Ÿä»–çš„ä»˜å‡ºã€‚</div>'; return; }
        list.innerHTML = investments.map(i => `
            <div class="daily-item" style="display:flex; justify-content:space-between; grid-template-columns:none;">
                <div>
                    <div style="font-weight:bold; color:#374151;">${i.type==='money'?'ğŸ’¸':i.type==='time'?'â³':'â¤ï¸'} ${i.desc}</div>
                    <div style="font-size:12px; color:#9CA3AF;">${i.date}</div>
                </div>
                <div style="color:#10B981; font-weight:800;">+${i.val}</div>
            </div>`).join('');
    }

    function analyzeMessage() {
        const text = document.getElementById('msg-input').value;
        const fb = document.getElementById('msg-feedback');
        let err = [];
        if(text.length > 40) err.push("âš ï¸ å¤ªé•·äº†ï¼é€™ç¨®é•·ç¯‡å¤§è«–åƒæ˜¯åœ¨å¯«æª¢è¨å ±å‘Šï¼Œåˆªæ¸› 50%ã€‚");
        if(text.includes("æ‹œè¨—") || text.includes("æ²’é—œä¿‚") || text.includes("å°ä¸èµ·")) err.push("âš ï¸ åµæ¸¬åˆ°ä½èƒ½é‡è©å½™ï¼ˆæ‹œè¨—/æ²’é—œä¿‚/å°ä¸èµ·ï¼‰ã€‚");
        if(text.includes("å› ç‚º") && text.length > 15) err.push("âš ï¸ ä¸è¦éåº¦è§£é‡‹å¦³çš„è¡Œç‚ºï¼Œå¥³ç‹ä¸éœ€è¦è§£é‡‹ã€‚");
        if(text.includes("ç‚ºä»€éº¼")) err.push("âš ï¸ ä¸è¦å•ã€Œç‚ºä»€éº¼ã€ï¼Œé€™é¡¯å¾—å¦³å¾ˆåœ¨ä¹ã€‚");
        
        if(!text) { fb.innerHTML = ""; }
        else if(err.length === 0) { 
            fb.innerHTML = "âœ… å®Œç¾ï¼ç°¡çŸ­ã€æœ‰åŠ›ã€é«˜åƒ¹å€¼ã€‚ (+5åˆ†)"; 
            fb.style.color="#10B981"; 
            if(!window.audited) { updateScore('ä½¿ç”¨è¨Šæ¯å¯©è¨ˆ', 5); window.audited=true; } 
        }
        else { fb.innerHTML = err.join("<br>"); fb.style.color="#EF4444"; }
    }

    let timerInterval;
    function startFreeze(seconds) {
        clearInterval(timerInterval);
        const display = document.getElementById('timer-display');
        const msg = document.getElementById('freeze-msg');
        document.getElementById('btn-freeze-short').disabled = true;
        document.getElementById('btn-freeze-long').disabled = true;
        msg.style.display = 'block';
        updateScore('é–‹å•Ÿæƒ…ç·’å†·å‡', 5);
        timerInterval = setInterval(() => {
            seconds--;
            const h = Math.floor(seconds/3600).toString().padStart(2,'0');
            const m = Math.floor((seconds%3600)/60).toString().padStart(2,'0');
            const s = (seconds%60).toString().padStart(2,'0');
            display.innerText = `${h}:${m}:${s}`;
            if(seconds <= 0) { clearInterval(timerInterval); msg.style.display = 'none'; document.getElementById('btn-freeze-short').disabled = false; document.getElementById('btn-freeze-long').disabled = false; alert("å†·å‡çµæŸï¼"); }
        }, 1000);
    }

    const checklistData = [
        { text: "å°æœå‹™å“¡/å¸æ©Ÿæ…‹åº¦å‚²æ…¢", isRed: true }, 
        { text: "å‰›èªè­˜å°±æœ‰è‚¢é«”è¶Šç•Œ", isRed: true },
        { text: "æƒ…ç·’å¤±æ§/è·¯æ€’ç—‡", isRed: true }, 
        { text: "é–‹å£é–‰å£å‰ä»»/è²¶ä½å‰ä»»", isRed: true },
        { text: "å¸¸å€ŸéŒ¢/å¿˜å¸¶éŒ¢åŒ…", isRed: true }, 
        { text: "å°æœªä¾†ç„¡è¦åŠƒ", isRed: true },
        { text: "PUAæ‰“å£“/èªªå¦³é€™ä¸å¥½é‚£ä¸å¥½", isRed: true }, 
        { text: "è¿½è¹¤å¤§é‡ç¶²ç´…/æ„›ææ›–æ˜§", isRed: true },
        { text: "ä¸»å‹•è²·å–®å¤§æ–¹", isRed: false }, 
        { text: "è¨˜å¾—å¦³çš„å°ç¿’æ…£", isRed: false },
        { text: "å¤§æ–¹å…¬é–‹é—œä¿‚", isRed: false }, 
        { text: "æƒ…ç·’ç©©å®š/æœ‹å‹é—œä¿‚æ­£å¸¸", isRed: false },
        { text: "æ”¯æŒå¦³çš„äº‹æ¥­/å¤¢æƒ³", isRed: false }, 
        { text: "ä¿¡å®ˆæ‰¿è«¾/ä¸é²åˆ°", isRed: false },
        { text: "å°Šé‡å¦³çš„èº«é«”èˆ‡é‚Šç•Œ", isRed: false }
    ];
    const clContainer = document.getElementById('checklist-container');
    checklistData.forEach(item => {
        const div = document.createElement('div');
        div.className = 'checklist-item';
        div.innerHTML = `
            <input type="checkbox" onchange="calcRadar()" data-red="${item.isRed}">
            <span style="color:${item.isRed?'#EF4444':'#10B981'}">${item.isRed?'[ç´…æ——]':'[åŠ åˆ†]'} ${item.text}</span>
        `;
        clContainer.appendChild(div);
    });
    function calcRadar() {
        const inputs = document.querySelectorAll('#checklist-container input:checked');
        let r=0, g=0; inputs.forEach(i => i.getAttribute('data-red')==='true'?r++:g++);
        const res = document.getElementById('radar-result'); res.style.display='block';
        if(r>0) { res.innerHTML = `âš ï¸ ç™¼ç¾ ${r} å€‹ç´…æ——ï¼å»ºè­°æ­¢æ`; res.style.background="#FEF2F2"; res.style.color="#EF4444"; res.style.border="1px solid #EF4444"; }
        else if(g>0) { res.innerHTML = `âœ… ç™¼ç¾ ${g} å€‹å„ªé»`; res.style.background="#ECFDF5"; res.style.color="#10B981"; res.style.border="1px solid #10B981"; }
        else res.style.display='none';
    }

    // --- 4. Dojo System (50 Questions) ---
    const quizData = [
        { q: "é€±äº”æ™šä¸Š9é»ï¼Œä»–å‚³è¨Šï¼šã€Œè¦ä¸è¦å‡ºä¾†å–ä¸€æ¯ï¼Ÿã€", a: "âœ… æ­£è§£ï¼šã€ŒçœŸä¸å·§å·²ç¶“ä¼‘æ¯äº†ï¼Œä¸‹æ¬¡æ—©é»ç´„å–”ã€‚ã€", bad_ans: "å¥½å•Šï¼åœ¨å“ªè£¡ï¼Ÿæˆ‘é¦¬ä¸ŠåŒ–å¦å‡ºé–€ï¼" },
        { q: "ä»–å•ï¼šã€Œå¦³åœ¨å¹¹å˜›ï¼Ÿã€", a: "âœ… æ­£è§£ï¼šéš”30åˆ†å›ï¼šã€Œå‰›å¿™å®Œå¿ƒæƒ…ä¸éŒ¯ï¼Œä½ å‘¢ï¼Ÿã€", bad_ans: "æ²’å¹¹å˜›å‘€ï¼Œåœ¨ç­‰ä½ è¨Šæ¯ï½" },
        { q: "ä»–å•ï¼šã€Œäº¤éå¹¾å€‹ç”·å‹ï¼Ÿã€", a: "âœ… æ­£è§£ï¼šã€Œé€™å¯æ˜¯ä»˜è²»å…§å®¹å–”ï¼Œç†Ÿä¸€é»å†èªªã€‚ã€", bad_ans: "ä¸‰å€‹ï¼Œå‰ä»»éƒ½å¾ˆæ¸£... (é–‹å§‹æŠ±æ€¨)" },
        { q: "ç´„æœƒæè­° AA åˆ¶ã€‚", a: "âœ… æ­£è§£ï¼šå¤§æ–¹ä»˜æ‰è‡ªå·±çš„ï¼Œç„¶å¾Œåˆªé™¤å¥½å‹ã€‚", bad_ans: "é›–ç„¶å¿ƒè£¡ä¸èˆ’æœï¼Œä½†é‚„æ˜¯é»˜é»˜ä»˜äº†ä¸€åŠä¸¦ç¹¼çºŒè·Ÿä»–ç´„æœƒã€‚" },
        { q: "ä»–èªªï¼šã€Œæˆ‘é‚„ä¸æƒ³å®šä¸‹ä¾†ã€‚ã€", a: "âœ… æ­£è§£ï¼šã€ŒçœŸå·§ï¼Œæˆ‘ä¹Ÿé‚„åœ¨è§€å¯Ÿä½ ã€‚ã€", bad_ans: "ç‚ºä»€éº¼ï¼Ÿæ˜¯æˆ‘å“ªè£¡ä¸å¤ å¥½å—ï¼Ÿæˆ‘å¯ä»¥æ”¹ã€‚" },
        { q: "é€äº†ä¸å–œæ­¡çš„ç¦®ç‰©ã€‚", a: "âœ… æ­£è§£ï¼šã€Œè¬è¬å¿ƒæ„ï¼ä½†æˆ‘æ¯”è¼ƒå¸¸ç”¨XXè‰²ï¼Œä¸‹æ¬¡å¯æ³¨æ„ï½ã€", bad_ans: "å“‡è¬è¬ï¼(å‡è£å¾ˆå–œæ­¡ï¼Œä¸æ•¢èªªçœŸè©±)" },
        { q: "å…©å¤©æ²’æ¶ˆæ¯ã€‚", a: "âœ… æ­£è§£ï¼šä¸ä¸»å‹•è¯ç¹«ï¼Œéå¥½è‡ªå·±ç”Ÿæ´»ã€‚", bad_ans: "å‚³è¨Šå•ä»–ï¼šã€Œä½ åœ¨å¿™å—ï¼Ÿæ€éº¼éƒ½ä¸ç†æˆ‘ï¼Ÿã€" },
        { q: "å°å¦³å†·æš´åŠ›ã€‚", a: "âœ… æ­£è§£ï¼šå¾¹åº•æ¶ˆå¤±ã€‚", bad_ans: "å¯«å°ä½œæ–‡å•ä»–åˆ°åº•æƒ³æ€æ¨£ï¼Œè©¦åœ–æºé€šã€‚" },
        { q: "å•ï¼šã€Œæ²’éŒ¢äº†é‚„æ„›æˆ‘å—ï¼Ÿã€", a: "âœ… æ­£è§£ï¼šã€Œé‚£ä½ è¦åŠ æ²¹ï¼Œæˆ‘ä¸å¸Œæœ›ç™¼ç”Ÿã€‚ã€", bad_ans: "ç•¶ç„¶æ„›å•Šï¼Œæˆ‘ä¸æ˜¯é‚£ç¨®æ‹œé‡‘å¥³ï¼Œæˆ‘å¯ä»¥é¤Šä½ ã€‚" },
        { q: "æƒ³æ‰¾ä»–æŠ±æ€¨ã€‚", a: "âœ… æ­£è§£ï¼šå»é‹å‹•æˆ–ç”¨å†·å‡åº«ã€‚", bad_ans: "æ‰“é›»è©±çµ¦ä»–å“­è¨´ä»Šå¤©é‡åˆ°çš„å€’éœ‰äº‹ï¼Œç•¶æƒ…ç·’åƒåœ¾æ¡¶ã€‚" },
        { q: "å‚³è‡ªæ‹ç…§çµ¦å¦³ã€‚", a: "âœ… æ­£è§£ï¼šå›è¡¨æƒ…ç¬¦è™Ÿæˆ–ã€Œæ°£è‰²ä¸éŒ¯ã€ã€‚", bad_ans: "å“‡å¥½å¸¥å–”ï¼(ç˜‹ç‹‚ç¨±è®šï¼Œæä¾›æƒ…ç·’åƒ¹å€¼)" },
        { q: "é–‹é»ƒè…”ã€‚", a: "âœ… æ­£è§£ï¼šä¸è®€ä¸å›ã€‚", bad_ans: "å°·å°¬åœ°å›ã€Œå“ˆå“ˆã€æˆ–é…åˆä»–èŠä¸‹å»ã€‚" },
        { q: "åŠå¤œä¸€é»å‚³ã€Œç¡äº†å—ã€ã€‚", a: "âœ… æ­£è§£ï¼šç„¡è¦–ï¼Œæ—©èµ·å†å›ã€‚", bad_ans: "é‚„æ²’ç¡ï½æ€éº¼äº†ï¼Ÿæƒ³æˆ‘å—ï¼Ÿ" },
        { q: "å·²è®€ä¸å›å¾Œçªç„¶å›è¦†ã€‚", a: "âœ… æ­£è§£ï¼šéš”åŒæ¨£æ™‚é–“å†å›ï¼Œèªæ°£å¹³æ·¡ã€‚", bad_ans: "ç§’å›ï¼šã€Œä½ çµ‚æ–¼å‡ºç¾äº†ï¼ã€" },
        { q: "å•ã€Œå¦³å–œæ­¡æˆ‘å—ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œç›®å‰æ„Ÿè¦ºä¸éŒ¯ï¼Œçœ‹ä½ è¡¨ç¾ã€‚ã€", bad_ans: "å–œæ­¡å•Šï¼è¶…å–œæ­¡ä½ çš„ï¼" },
        { q: "é²åˆ°20åˆ†é˜æ²’èªªã€‚", a: "âœ… æ­£è§£ï¼š15åˆ†æ™‚é›¢é–‹ã€‚", bad_ans: "ä¹–ä¹–åœ¨åŸåœ°ç­‰ï¼Œè¦‹é¢å¾Œé‚„è½ä»–è—‰å£ã€‚" },
        { q: "æ”¹ç´„å®¶è£¡ã€‚", a: "âœ… æ­£è§£ï¼šã€Œç¿’æ…£ç´„å¤–é¢ï¼Œé‚„æ˜¯å»é¤å»³å§ã€‚ã€", bad_ans: "å¥½å®³ç¾å–”...ä½†å¦‚æœä½ æƒ³çš„è©±ä¹Ÿå¯ä»¥..." },
        { q: "ç´„æœƒä¸€ç›´çœ‹æ‰‹æ©Ÿã€‚", a: "âœ… æ­£è§£ï¼šå¾®ç¬‘åœä¸‹ä¸èªªè©±ï¼Œçœ‹è‘—ä»–ã€‚", bad_ans: "è‡ªå·±ä¹Ÿæ»‘æ‰‹æ©Ÿï¼Œå‡è£ä¸åœ¨æ„ã€‚" },
        { q: "èªªã€Œå¦³å¤ªå¼·å‹¢ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæˆ‘å°å€¼å¾—çš„äººå¾ˆæº«æŸ”ã€‚ã€", bad_ans: "å°ä¸èµ·ï¼Œæˆ‘æœƒæ”¹é€²ï¼Œæˆ‘è©¦è‘—æº«æŸ”ä¸€é»ã€‚" },
        { q: "èª‡åˆ¥çš„å¥³ç”Ÿã€‚", a: "âœ… æ­£è§£ï¼šã€Œæ˜¯å–”ï¼Œè »æ¼‚äº®çš„ã€‚ã€(æ·¡å®š)", bad_ans: "ç”Ÿæ°£è³ªå•ï¼šã€Œä½ æ˜¯ä¸æ˜¯å–œæ­¡å¥¹ï¼Ÿã€æˆ–è‡ªå‘ã€‚" },
        { q: "ä»–å•ã€Œå¦³è¦ºå¾—æˆ‘æ€éº¼æ¨£ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œç›®å‰é‚„ä¸éŒ¯å‘€ï¼ŒæŒºèŠå¾—ä¾†çš„ã€‚ã€", bad_ans: "ä½ æ˜¯æˆ‘çš„ç†æƒ³å‹ï¼æˆ‘è¶…å–œæ­¡ä½ çš„ï¼" },
        { q: "ä»–èªªã€Œæˆ‘å‰ä»»å¾ˆç˜‹ã€ã€‚", a: "âœ… æ­£è§£ï¼šè­¦æƒ•ï¼Œä¸äºˆç½®è©•ï¼Œè§€å¯Ÿä»–æ˜¯å¦æ„›æ¨å¸è²¬ä»»ã€‚", bad_ans: "çœŸçš„å—ï¼Ÿå¥¹æ€éº¼å¯ä»¥é€™æ¨£å°ä½ ï¼å¥½å¿ƒç–¼ä½ å–”ã€‚" },
        { q: "å‰›èªè­˜å°±å«ã€Œå¯¶è²ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œå«æˆ‘åå­—å°±å¥½ï¼Œæˆ‘ä¸ç¿’æ…£å¤ªå¿«ã€‚ã€", bad_ans: "ç¾æ¾€æ¥å—ï¼Œå¿ƒè£¡è¦ºå¾—å¾ˆç”œã€‚" },
        { q: "ç´„æœƒè‡¨æ™‚å–æ¶ˆã€‚", a: "âœ… æ­£è§£ï¼šã€Œå¥½çš„æ²’å•é¡Œã€‚ã€(ç„¶å¾Œå…©é€±å…§ä¸ç­”æ‡‰é‚€ç´„)", bad_ans: "è›¤ï½å¯æ˜¯æˆ‘å·²ç¶“æº–å‚™å¥½äº†è€¶...ä¸èƒ½æ™šé»å—ï¼Ÿ" },
        { q: "å•ã€Œèƒ½å»å¦³å®¶ååå—ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œå®¶è£¡æ¯”è¼ƒäº‚ï¼Œä¸‹æ¬¡å§ã€‚ã€(å …å®šæ‹’çµ•)", bad_ans: "å¥½å•Šï¼Œä½†ä½ ä¸èƒ½äº‚ä¾†å–”ã€‚" },
        { q: "ä»–èªªã€Œæˆ‘ä¸æƒ³è€½èª¤å¦³ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œå¥½çš„ï¼Œè¬è¬ä½ çš„å¦æ‰¿ã€‚ã€(æœæ–·é›¢é–‹)", bad_ans: "ä¸æœƒè€½èª¤å•¦ï¼Œæˆ‘é¡˜æ„ç­‰ä½ ã€‚" },
        { q: "ç¯€æ—¥æ²’è¡¨ç¤ºã€‚", a: "âœ… æ­£è§£ï¼šå†·æ·¡è™•ç†ï¼Œç”šè‡³ä¸è¦‹é¢ã€‚", bad_ans: "ä¸»å‹•é€ä»–ç¦®ç‰©ï¼Œæé†’ä»–ä»Šå¤©æ˜¯ç¯€æ—¥ã€‚" },
        { q: "ç¸½æ˜¯èªªã€Œæ”¹å¤©ã€ã€‚", a: "âœ… æ­£è§£ï¼šä¸å†ä¸»å‹•é‚€ç´„ã€‚", bad_ans: "ä¸€ç›´è¿½å•ï¼šé‚£åˆ°åº•æ˜¯å“ªä¸€å¤©ï¼Ÿçµ¦å€‹æ™‚é–“å˜›ã€‚" },
        { q: "è¨Šæ¯åªå›è²¼åœ–ã€‚", a: "âœ… æ­£è§£ï¼šå·²è®€ä¸å›ã€‚", bad_ans: "æ‹¼å‘½æ‰¾è©±é¡Œå»¶çºŒå°è©±ã€‚" },
        { q: "ä»–èªªã€Œæˆ‘åª½èªª...ã€ã€‚", a: "âœ… æ­£è§£ï¼šè­¦æƒ•åª½å¯¶å±¬æ€§ã€‚", bad_ans: "å“‡ä½ è·Ÿä½ åª½æ„Ÿæƒ…çœŸå¥½ï¼Œå¥½å­é †å–”ã€‚" },
        { q: "å«Œæ£„å¦³çš„å¦å®¹ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæˆ‘è¦ºå¾—é€™æ¨£å¾ˆç¾ï¼Œæˆ‘å–œæ­¡å°±å¥½ã€‚ã€", bad_ans: "é‚£æˆ‘ä¸‹æ¬¡æ”¹åŒ–æ·¡å¦ï¼Œä½ ä¸å–œæ­¡æˆ‘å°±ä¸ç•«ã€‚" },
        { q: "å•å¦³è–ªæ°´å¤šå°‘ã€‚", a: "âœ… æ­£è§£ï¼šã€Œå¤ é¤Šæ´»è‡ªå·±å›‰ï¼Œä½ å‘¢ï¼Ÿã€", bad_ans: "è€å¯¦å ±æ•¸å­—ï¼Œç”šè‡³æŠŠå­˜æ¬¾éƒ½èªªå‡ºä¾†ã€‚" },
        { q: "ç¬¬ä¸€æ¬¡ç´„æœƒé¸ä¾¿å®œè·¯é‚Šæ”¤ã€‚", a: "âœ… æ­£è§£ï¼šç¦®è²Œåƒå®Œï¼Œå›å®¶å¾Œå†·è™•ç†ã€‚", bad_ans: "è¡¨ç¾å¾—éå¸¸èƒ½åƒè‹¦ï¼Œèªªé€™å¾ˆå¥½åƒã€‚" },
        { q: "ä»–èªªã€Œå¦³å¥½åƒè®Šèƒ–äº†ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæœ€è¿‘åƒå¤ªå¥½ï¼Œå¹¸ç¦è‚¥å˜›ã€‚ã€(è‡ªä¿¡)", bad_ans: "çœŸçš„å—ï¼Ÿæˆ‘å¥½é›£éï¼Œæˆ‘è¦é–‹å§‹æ¸›è‚¥äº†ã€‚" },
        { q: "åŠå¤œæ‰“é›»è©±ä¾†ã€‚", a: "âœ… æ­£è§£ï¼šä¸æ¥ï¼Œéš”å¤©å†å›ã€‚", bad_ans: "ç§’æ¥ï¼Œé‚„èŠåˆ°å¤©äº®ã€‚" },
        { q: "è·Ÿæœ‹å‹èšæœƒä¸å¸¶å¦³ã€‚", a: "âœ… æ­£è§£ï¼šè‡ªå·±ä¹Ÿå®‰æ’ç²¾å½©æ´»å‹•ã€‚", bad_ans: "åµé¬§ï¼šç‚ºä»€éº¼ä¸å¸¶æˆ‘å»ï¼Ÿæ˜¯ä¸æ˜¯æœ‰é¬¼ï¼Ÿ" },
        { q: "èªªå¦³æœ‹å‹å£è©±ã€‚", a: "âœ… æ­£è§£ï¼šã€Œå¥¹å€‘å°æˆ‘å¾ˆé‡è¦ï¼Œè«‹å°Šé‡ã€‚ã€", bad_ans: "é™„å’Œä»–èªªæœ‹å‹çš„ä¸æ˜¯ã€‚" },
        { q: "å•ã€Œå¦‚æœæˆ‘å‡ºè»Œå¦³æœƒæ€æ¨£ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæˆ‘æœƒç›´æ¥æ¶ˆå¤±ï¼Œè®“ä½ æ‰¾ä¸åˆ°ã€‚ã€", bad_ans: "æˆ‘æœƒå“­æ­»ï¼Œæ‹œè¨—ä¸è¦é€™æ¨£å°æˆ‘ã€‚" },
        { q: "ç¸½æ˜¯è®“å¦³è²·å–®ã€‚", a: "âœ… æ­£è§£ï¼šã€Œå“å‘€æˆ‘å¿˜è¨˜å¸¶éŒ¢åŒ…äº†ï¼Œä½ å…ˆå¢Šï¼Ÿã€", bad_ans: "é»˜é»˜æéŒ¢ï¼Œè¦ºå¾—è«‡éŒ¢å‚·æ„Ÿæƒ…ã€‚" },
        { q: "èªªã€Œå¦³å¾ˆé›£æã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæœ‰åŸå‰‡çš„äººé€šå¸¸æ¯”è¼ƒé›£æã€‚ã€", bad_ans: "å“ªæœ‰ï½æˆ‘å¾ˆéš¨å’Œçš„å¥½ä¸å¥½ã€‚" },
        { q: "ä¸é¡˜æ„å…¬é–‹åˆç…§ã€‚", a: "âœ… æ­£è§£ï¼šè§€å¯Ÿæ˜¯å¦ç‚ºé­šå¡˜ç®¡ç†ã€‚", bad_ans: "ä¸€ç›´ç›§ä»–ç™¼æ–‡ã€‚" },
        { q: "èªªã€Œæˆ‘é…ä¸ä¸Šå¦³ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œé‚£ä½ è¦åŠªåŠ›è·Ÿä¸Šå–”ã€‚ã€", bad_ans: "ä¸æœƒå•¦ï¼Œä½ å¾ˆå¥½çš„ï¼Œä¸è¦é€™æ¨£æƒ³ã€‚" },
        { q: "æƒ…ç·’å‹’ç´¢ã€‚", a: "âœ… æ­£è§£ï¼šä¸æ¥å—å‹’ç´¢ï¼Œå†·éœç•«ç•Œç·šã€‚", bad_ans: "å› ç‚ºæ„§ç–šè€Œå¦¥å”ã€‚" },
        { q: "æ‰¹è©•å¦³çš„å®¶äººã€‚", a: "âœ… æ­£è§£ï¼šåš´è‚…åˆ¶æ­¢ã€‚", bad_ans: "æ²ˆé»˜ä¸èªã€‚" },
        { q: "ä¸€ç›´çœ‹åˆ¥çš„å¥³ç”Ÿã€‚", a: "âœ… æ­£è§£ï¼šã€Œé‚£å€‹å¥³ç”Ÿç¢ºå¯¦è »è¾£çš„ã€‚ã€(å¤§æ–¹)", bad_ans: "ç”Ÿæ°£åƒé†‹ï¼šä½ æ˜¯ä¸æ˜¯è¦ºå¾—å¥¹æ¯”æˆ‘ç¾ï¼Ÿ" },
        { q: "èªªå¿™ï¼Œå»åœ¨æ»‘æ‰‹æ©Ÿã€‚", a: "âœ… æ­£è§£ï¼šçœ‹ç©¿ä¸èªªç ´ï¼Œå¿ƒè£¡æ‰£åˆ†ã€‚", bad_ans: "è³ªå•ï¼šä½ ä¸æ˜¯èªªåœ¨å¿™ï¼Ÿç‚ºä»€éº¼åœ¨æŒ‰è®šï¼Ÿ" },
        { q: "ä¸å°Šé‡å¦³çš„å·¥ä½œã€‚", a: "âœ… æ­£è§£ï¼šã€Œé€™ä»½å·¥ä½œè®“æˆ‘å¾ˆæœ‰æˆå°±æ„Ÿã€‚ã€", bad_ans: "å°å•Šæˆ‘ä¹Ÿè¦ºå¾—å·¥ä½œå¾ˆç´¯ï¼Œæƒ³è¾­è·ã€‚" },
        { q: "æŠŠå¦³ç•¶å¸æ©Ÿ/å¤–é€å“¡ã€‚", a: "âœ… æ­£è§£ï¼šæ‹’çµ•ç•¶å·¥å…·äººã€‚", bad_ans: "éš¨å‚³éš¨åˆ°ï¼Œä»¥ç‚ºé€™æ˜¯é«”è²¼ã€‚" },
        { q: "åªåœ¨éœ€è¦æ™‚æ‰¾å¦³ã€‚", a: "âœ… æ­£è§£ï¼šä¸äºˆç†æœƒã€‚", bad_ans: "é–‹å¿ƒä»–çµ‚æ–¼æƒ³åˆ°æˆ‘äº†ã€‚" },
        { q: "å¦³æ˜¯èª°ï¼Ÿ", a: "âœ… æ­£è§£ï¼šæˆ‘æ˜¯å¥³ç‹ï¼Œä¸æ˜¯é¸é …ã€‚", bad_ans: "æˆ‘æ˜¯ç­‰å¾…è¢«ä½ é¸æ“‡çš„äººã€‚" }
    ];
    
    quizData.forEach(item => { if(!item.bad_ans) item.bad_ans = "è©¦åœ–è§£é‡‹è‡ªå·±ï¼Œæˆ–è¡¨ç¾å‡ºéœ€è¦å°æ–¹çš„æ¨£å­ (ä½åƒ¹å€¼è¡Œç‚º)ã€‚"; });
    
    let quizIdx = 0;
    let dojoMode = 'learn';

    function setDojoMode(mode) {
        dojoMode = mode;
        document.getElementById('btn-mode-learn').className = mode === 'learn' ? 'mode-btn active' : 'mode-btn';
        document.getElementById('btn-mode-quiz').className = mode === 'quiz' ? 'mode-btn active' : 'mode-btn';
        
        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
        if(mode === 'learn') document.getElementById('btn-mode-learn').classList.add('active');
        else document.getElementById('btn-mode-quiz').classList.add('active');

        document.getElementById('learn-area').style.display = mode === 'learn' ? 'block' : 'none';
        document.getElementById('quiz-area').style.display = mode === 'quiz' ? 'block' : 'none';
        document.getElementById('dojo-a').style.display = 'none';
        document.getElementById('btn-show-ans').style.display = 'inline-block';
        document.getElementById('quiz-feedback').innerText = '';
        renderQuiz();
    }

    function renderQuiz() {
        const item = quizData[quizIdx];
        document.getElementById('dojo-q').innerText = "Q" + (quizIdx+1) + ": " + item.q;
        document.getElementById('quiz-counter').innerText = (quizIdx+1)+'/'+quizData.length;
        document.getElementById('dojo-card').classList.remove('shake');

        if(dojoMode === 'learn') {
            document.getElementById('dojo-a').innerText = item.a;
            document.getElementById('dojo-a').style.display = 'none';
            document.getElementById('btn-show-ans').style.display = 'inline-block';
        } else {
            const optsContainer = document.getElementById('quiz-options');
            optsContainer.innerHTML = '';
            document.getElementById('quiz-feedback').innerText = '';
            
            const isCorrectFirst = Math.random() > 0.5;
            const correctBtn = `<div class="quiz-option" onclick="checkAnswer(true, this)">${item.a.replace('âœ… æ­£è§£ï¼š', '')}</div>`;
            const wrongBtn = `<div class="quiz-option" onclick="checkAnswer(false, this)">${item.bad_ans}</div>`;
            optsContainer.innerHTML = isCorrectFirst ? (correctBtn + wrongBtn) : (wrongBtn + correctBtn);
        }
    }

    function showAnswer() { 
        document.getElementById('dojo-a').style.display = 'block'; 
        document.getElementById('btn-show-ans').style.display = 'none';
        updateScore('é“å ´å­¸ç¿’', 1);
    }

    function checkAnswer(isCorrect, btn) {
        if(btn.parentElement.classList.contains('answered')) return;
        btn.parentElement.classList.add('answered');
        const fb = document.getElementById('quiz-feedback');
        const card = document.getElementById('dojo-card');

        if(isCorrect) {
            btn.classList.add('correct');
            fb.innerText = "â­•ï¸ ç­”å°äº†ï¼å¥³ç‹æ€ç¶­ GET (+3åˆ†)"; fb.style.color = "var(--success)";
            updateScore('æ¸¬é©—ç­”å°', 3);
            setTimeout(() => { nextQuiz(1); }, 1500);
        } else {
            btn.classList.add('wrong');
            card.classList.add('shake');
            fb.innerText = "âŒ ç­”éŒ¯äº†ï¼é€™æ˜¯ä½åƒ¹å€¼è¡Œç‚º (-10åˆ†)"; fb.style.color = "var(--danger)";
            updateScore('æ¸¬é©—ç­”éŒ¯', -10);
            document.querySelectorAll('.quiz-option').forEach(opt => { if(!opt.classList.contains('wrong')) opt.classList.add('correct'); });
        }
    }

    function nextQuiz(d) {
        quizIdx += d;
        if(quizIdx < 0) quizIdx = quizData.length-1;
        if(quizIdx >= quizData.length) quizIdx = 0;
        document.getElementById('dojo-a').style.display = 'none';
        document.getElementById('btn-show-ans').style.display = 'inline-block';
        document.getElementById('quiz-feedback').innerText = '';
        renderQuiz();
    }
    renderQuiz();
</script>

</body>
</html>
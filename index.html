<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Queen's Gambit æº–è‘£å¨˜é¤Šæˆ</title>
    
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">

    <style>
        /* --- v4.0 æ ¸å¿ƒæ¨£å¼ --- */
        :root {
            --primary: #4A148C;
            --primary-light: #7c43bd;
            --accent: #D4AF37; /* é‡‘è‰² */
            --danger: #c62828;
            --success: #2E7D32;
            --bg-gradient: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-dark: #1A237E;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            background: var(--bg-gradient);
            color: var(--text-dark);
            margin: 0; padding: 0;
            display: flex; justify-content: center;
            min-height: 100vh;
        }

        .app-container {
            width: 100%; max-width: 480px; min-height: 100vh;
            padding: 20px; box-sizing: border-box; padding-bottom: 100px;
            position: relative; overflow-x: hidden;
        }

        /* Header */
        header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; padding-top: 10px; }
        .header-left { display: flex; align-items: center; }
        .app-logo { width: 45px; height: 45px; border-radius: 12px; box-shadow: var(--shadow); margin-right: 12px; border: 2px solid white; object-fit: cover; }
        h1 { margin: 0; font-size: 20px; font-weight: 800; color: var(--primary); }
        
        /* ä½¿ç”¨è€…é ­åƒ (å…¥å£) */
        .user-badge {
            display: flex; align-items: center; background: white; padding: 5px 12px 5px 5px;
            border-radius: 30px; box-shadow: var(--shadow); cursor: pointer; border: 1px solid var(--accent);
        }
        .user-avatar-mini { width: 30px; height: 30px; border-radius: 50%; background: #eee; margin-right: 8px; object-fit: cover; }
        .user-score-mini { font-weight: bold; color: var(--primary); font-size: 14px; }

        /* Glass Cards */
        .glass-card {
            background: var(--card-bg); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border-radius: 20px; padding: 20px; box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.6); margin-bottom: 15px;
        }

        /* ç›²ç›’èªéŒ„ */
        .labubu-card {
            background: linear-gradient(135deg, var(--primary) 0%, #7B1FA2 100%);
            color: white; position: relative; overflow: hidden; cursor: pointer;
        }
        .labubu-card::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%); pointer-events: none;
        }
        .labubu-card h2 { font-size: 11px; opacity: 0.9; margin: 0; display: flex; align-items: center; letter-spacing: 1px; color: #E1BEE7; }
        .labubu-card p { font-size: 18px; font-weight: bold; line-height: 1.4; margin: 15px 0; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }

        /* åŠŸèƒ½ç¶²æ ¼ */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        .feature-card {
            background: rgba(255,255,255,0.8); border-radius: 16px; padding: 18px 10px; text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03); cursor: pointer; border: 1px solid white;
        }
        .feature-card:active { transform: scale(0.96); }
        .feature-card i { font-size: 28px; display: block; margin-bottom: 8px; }
        .feature-card h3 { margin: 0; font-size: 14px; font-weight: 700; color: #333; }
        .feature-card span { font-size: 10px; color: #888; display: block; margin-top: 4px; }

        .fc-invest i { color: #FBC02D; } .fc-radar i { color: #E91E63; }
        .fc-auditor i { color: #43A047; } .fc-locker i { color: #039BE5; }

        /* æ™¨é–“å„€å¼ Checkbox */
        .daily-item { display: flex; align-items: center; padding: 10px; background: rgba(255,255,255,0.5); border-radius: 10px; margin-bottom: 8px; }
        .daily-item input { margin-right: 10px; transform: scale(1.3); accent-color: var(--primary); }

        /* é é¢åˆ‡æ› */
        .page { display: none; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* å°èˆªåˆ— */
        .nav-bar {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: calc(100% - 40px); max-width: 440px;
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px);
            display: flex; justify-content: space-around; padding: 12px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-radius: 30px; z-index: 100; border: 1px solid rgba(255,255,255,0.5);
        }
        .nav-item { text-align: center; color: #B0BEC5; font-size: 10px; cursor: pointer; transition: color 0.3s; }
        .nav-item.active { color: var(--primary); font-weight: 700; }
        .nav-item i { display: block; font-size: 20px; margin-bottom: 2px; }

        .back-btn { background: none; border: none; color: var(--primary); font-weight: 600; cursor: pointer; margin-bottom: 15px; display: flex; align-items: center; font-size: 14px; }
        
        /* --- Profile Page Specifics --- */
        .score-circle {
            width: 120px; height: 120px; border-radius: 50%;
            background: conic-gradient(var(--primary) 0% 0%, #eee 0% 100%);
            margin: 0 auto 20px auto; position: relative;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .score-inner {
            width: 100px; height: 100px; border-radius: 50%; background: white;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .score-num { font-size: 32px; font-weight: 800; color: var(--primary); }
        .score-label { font-size: 12px; color: #888; }
        
        .log-list { max-height: 200px; overflow-y: auto; margin-top: 10px; }
        .log-item { font-size: 12px; padding: 8px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }
        .log-pos { color: var(--success); }
        .log-neg { color: var(--danger); }
        
        .deduction-alert { background: #FFEBEE; border: 1px solid #EF9A9A; color: #C62828; padding: 10px; border-radius: 10px; margin-top: 10px; display: none; font-size: 13px; }

        /* å…¶ä»–é€šç”¨ */
        .section-title { font-size: 11px; font-weight: 800; color: var(--text-grey); margin: 25px 0 10px 5px; letter-spacing: 1px; text-transform: uppercase; }
        textarea { width: 100%; height: 100px; padding: 15px; border-radius: 15px; border: 1px solid #ddd; outline: none; resize: none; }
        .invest-btn { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 5px; }
        .invest-input { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #ddd; margin-bottom: 10px; box-sizing: border-box; }
        .checklist-item { display: flex; align-items: center; padding: 14px; background: white; margin-bottom: 10px; border-radius: 12px; border: 1px solid #f0f0f0; }
        .checklist-item input { margin-right: 12px; transform: scale(1.3); accent-color: var(--primary); }

    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>

<div class="app-container">
    
    <div id="page-home" class="page active">
        <header>
            <div class="header-left">
                <img src="icon.png" alt="Logo" class="app-logo" onerror="this.src='https://via.placeholder.com/50'">
                <h1>Queen's Gambit</h1>
            </div>
            <div class="user-badge" onclick="navTo('profile')">
                <img src="icon.png" class="user-avatar-mini" onerror="this.src='https://via.placeholder.com/30'">
                <div class="user-score-mini" id="mini-score">0</div>
            </div>
        </header>

        <div class="glass-card labubu-card" onclick="refreshQuote()">
            <h2><i class="fas fa-crown"></i>&nbsp; æº–è‘£å¨˜å¿ƒæ³• (é»æ“Šæ›´æ–°)</h2>
            <p id="daily-quote">"ç”·äººæŠ•è³‡åœ¨å“ªè£¡ï¼Œå¿ƒå°±åœ¨å“ªè£¡ã€‚"</p>
        </div>

        <div class="section-title">æ™¨é–“å„€å¼ DAILY RITUAL</div>
        <div class="glass-card" id="morning-ritual">
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('æ™¨é–“è‡ªä¿¡ç¢ºèª', 10, this)">
                <span>æ ¸å¿ƒè‡ªä¿¡ç¢ºèª (æˆ‘æ˜¯çå“)</span>
            </div>
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('æƒ…ç·’è­·ç›¾é–‹å•Ÿ', 10, this)">
                <span>æƒ…ç·’è­·ç›¾é–‹å•Ÿ (ä¸éš¨ä¹‹èµ·èˆ)</span>
            </div>
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('å¤–è²Œç®¡ç†ç¢ºèª', 10, this)">
                <span>å¤–è²Œè³‡ç”¢ç›¤é» (å¦å®¹ç©¿æ­)</span>
            </div>
        </div>

        <div class="section-title">æˆ°è¡“å·¥å…·ç®± TACTICAL TOOLS</div>
        <div class="grid">
            <div class="feature-card fc-invest" onclick="navTo('invest')">
                <i class="fas fa-hand-holding-usd"></i>
                <h3>æŠ•è³‡è¨˜å¸³æœ¬</h3>
                <span>(+10åˆ†)</span>
            </div>
            <div class="feature-card fc-radar" onclick="navTo('radar')">
                <i class="fas fa-radar"></i>
                <h3>å„ªè³ªç”·é›·é”</h3>
                <span>ç¯©é¸é«˜è³‡ç”¢</span>
            </div>
            <div class="feature-card fc-auditor" onclick="navTo('auditor')">
                <i class="fas fa-comments"></i>
                <h3>è¨Šæ¯å¯©è¨ˆå“¡</h3>
                <span>(+5åˆ†)</span>
            </div>
            <div class="feature-card fc-locker" onclick="navTo('locker')">
                <i class="fas fa-snowflake"></i>
                <h3>æƒ…ç·’å†·å‡åº«</h3>
                <span>(+5åˆ†)</span>
            </div>
        </div>
        
        <div class="glass-card" style="margin-top: 15px; text-align: center; cursor: pointer; border-left: 5px solid #673AB7;" onclick="navTo('dojo')">
            <div style="display:flex; align-items:center; justify-content:center; color:#673AB7;">
                <i class="fas fa-chess-queen" style="font-size: 20px; margin-right:10px;"></i>
                <h3 style="margin: 0; font-size: 16px;">ä¿®ç…‰é“å ´ (+5åˆ†/é¡Œ)</h3>
            </div>
        </div>
    </div>

    <div id="page-profile" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ‘¸ å¥³ç‹æª”æ¡ˆ (User: Queen)</h2>
        
        <div class="glass-card" style="text-align: center;">
            <div class="section-title" style="margin-top:0;">ä»Šæ—¥å¥³ç¥æŒ‡æ•¸</div>
            <div class="score-circle" id="score-ring">
                <div class="score-inner">
                    <div class="score-num" id="profile-score">0</div>
                    <div class="score-label">POINTS</div>
                </div>
            </div>
            <div id="score-comment" style="font-size:14px; font-weight:bold; color:var(--primary);"></div>
            
            <div id="deduction-box" class="deduction-alert">
                <strong>âš ï¸ æ‰£åˆ†è­¦å ±ï¼š</strong><br>
                <span id="deduction-reason"></span>
            </div>
        </div>

        <div class="section-title">ğŸŒ™ æ™šé–“èª å¯¦å¾©ç›¤ (çŠ¯éŒ¯è«‹å‹¾é¸)</div>
        <div class="glass-card" style="background: #fff0f0;">
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('è¦–å§¦ä»–ç¤¾ç¾¤', -20, this)">
                <span>å¿ä¸ä½å»çœ‹äº†ä»–çš„ IG/FB (-20)</span>
            </div>
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('ä¸»å‹•å‚³ä½ä½è¨Šæ¯', -30, this)">
                <span>æ²’å¿ä½ä¸»å‹•å‚³äº†è¨å¥½è¨Šæ¯ (-30)</span>
            </div>
            <div class="daily-item">
                <input type="checkbox" onchange="updateScore('æƒ…ç·’å¤±æ§', -20, this)">
                <span>æƒ…ç·’å¤±æ§/å¤§åµå¤§é¬§ (-20)</span>
            </div>
        </div>

        <div class="section-title">ä»Šæ—¥æ´»å‹•ç´€éŒ„ LOG</div>
        <div class="glass-card log-list" id="score-log">
            </div>
        
        <div style="text-align:center;">
             <span style="font-size:12px; color:#aaa; cursor:pointer;" onclick="resetDaily()">[é‡ç½®ä»Šæ—¥æ•¸æ“š]</span>
        </div>
    </div>

    <div id="page-invest" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ’° æŠ•è³‡è¨˜å¸³æœ¬</h2>
        <div class="glass-card">
            <input type="text" id="invest-desc" class="invest-input" placeholder="é …ç›® (ä¾‹: æ¥é€ã€ç¦®ç‰©)">
            <select id="invest-type" class="invest-input">
                <option value="money">ğŸ’¸ é‡‘éŒ¢æŠ•å…¥</option>
                <option value="time">â³ æ™‚é–“æŠ•å…¥</option>
                <option value="effort">â¤ï¸ æƒ…ç·’æŠ•å…¥</option>
            </select>
            <input type="number" id="invest-val" class="invest-input" placeholder="åƒ¹å€¼">
            <button class="invest-btn" onclick="addInvest()">å¯«å…¥ (+10åˆ†)</button>
        </div>
        <div class="section-title">æ­·å²ç´€éŒ„</div>
        <div id="invest-history" style="margin-top:10px;"></div>
    </div>

    <div id="page-radar" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ§ å„ªè³ªç”·é›·é”</h2>
        <div id="checklist-container"></div>
        <div id="radar-result" class="glass-card" style="display:none; text-align:center; font-weight:bold; margin-top:20px;"></div>
    </div>

    <div id="page-auditor" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ“ è¨Šæ¯å¯©è¨ˆå“¡</h2>
        <div class="glass-card">
            <p style="font-size:12px; color:#666;">ä½¿ç”¨æ­¤å·¥å…·æª¢æŸ¥è¨Šæ¯å¯ç²å¾—ç©åˆ†ã€‚</p>
            <textarea id="msg-input" placeholder="è²¼ä¸Šå¦³æƒ³å‚³çµ¦ä»–çš„è¨Šæ¯..." oninput="analyzeMessage()"></textarea>
            <div id="msg-feedback" style="color: #666; font-size:14px;">ç­‰å¾…è¼¸å…¥...</div>
        </div>
    </div>

    <div id="page-locker" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>â„ï¸ æƒ…ç·’å†·å‡åº«</h2>
        <div class="glass-card" style="text-align: center;">
            <div id="timer-display" style="font-size: 50px; font-weight: 800; color: var(--primary); margin: 30px 0;">00:00:00</div>
            <button id="btn-freeze-short" class="invest-btn" onclick="startFreeze(10)" style="background: #00BCD4; margin-bottom: 10px;">âš¡ï¸ é«”é©—å†·å‡ (10ç§’)</button>
            <button id="btn-freeze-long" class="invest-btn" onclick="startFreeze(3600)" style="background: #c62828;">ğŸ”’ æ­£å¼å†·å‡ (1å°æ™‚)</button>
            <p id="freeze-msg" style="display:none; margin-top:15px; color:#c62828;">å†·å‡ä¸­ï¼Œ+5 ç©åˆ†ï¼</p>
        </div>
    </div>

    <div id="page-dojo" class="page">
        <button class="back-btn" onclick="navTo('home')"><i class="fas fa-arrow-left"></i>&nbsp; è¿”å›é¦–é </button>
        <h2>ğŸ¥‹ ä¿®ç…‰é“å ´</h2>
        <div class="glass-card" style="text-align: center;">
            <div id="dojo-q" style="font-size: 16px; font-weight: bold; margin-bottom: 20px; line-height: 1.5;">é¡Œç›®...</div>
            <button id="btn-show-ans" class="invest-btn" style="background:none; border:2px solid var(--primary); color:var(--primary);" onclick="showAnswer()">æŸ¥çœ‹å›è¦† (+5åˆ†)</button>
            <div id="dojo-a" style="margin-top:20px; text-align:left; display:none; background:#f0f4c3; padding:15px; border-radius:10px; color:#33691e;"></div>
        </div>
        <div style="display:flex; justify-content:space-between; margin-top:15px;">
            <button class="back-btn" onclick="nextQuiz(-1)">ä¸Šä¸€é¡Œ</button>
            <span id="quiz-counter" style="font-size:12px; color:#aaa; line-height:30px;">1 / 50</span>
            <button class="back-btn" onclick="nextQuiz(1)">ä¸‹ä¸€é¡Œ</button>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="navTo('home')"><i class="fas fa-home"></i>é¦–é </div>
        <div class="nav-item" onclick="navTo('profile')"><i class="fas fa-user-circle"></i>æª”æ¡ˆ</div>
        <div class="nav-item" onclick="navTo('invest')"><i class="fas fa-wallet"></i>æŠ•è³‡</div>
        <div class="nav-item" onclick="navTo('dojo')"><i class="fas fa-chess-queen"></i>é“å ´</div>
    </div>

</div>

<script>
    // --- 1. æ ¸å¿ƒç³»çµ± (ç©åˆ†èˆ‡ä½¿ç”¨è€…) ---
    // æ¯æ—¥æ•¸æ“šçµæ§‹: { date: '2023-10-xx', score: 0, logs: [] }
    let todayData = JSON.parse(localStorage.getItem('queen_daily')) || resetDailyData();

    function resetDailyData() {
        return { date: new Date().toLocaleDateString(), score: 0, logs: [] };
    }

    // æª¢æŸ¥æ˜¯å¦è·¨æ—¥
    if(todayData.date !== new Date().toLocaleDateString()) {
        todayData = resetDailyData();
        saveData();
    }

    function saveData() {
        localStorage.setItem('queen_daily', JSON.stringify(todayData));
        updateProfileUI();
    }

    function updateScore(action, points, element) {
        // å¦‚æœæ˜¯ checkboxï¼Œå–æ¶ˆå‹¾é¸è¦æ‰£å›åˆ†æ•¸ (æˆ–åä¹‹)
        if(element && element.type === 'checkbox') {
            if(!element.checked) points = -points; 
        }

        todayData.score += points;
        todayData.logs.unshift({ action, points, time: new Date().toLocaleTimeString() });
        saveData();
    }

    function updateProfileUI() {
        // æ›´æ–°åˆ†æ•¸é¡¯ç¤º
        const score = todayData.score;
        document.getElementById('profile-score').innerText = score;
        document.getElementById('mini-score').innerText = score;
        
        // æ›´æ–°åœ“ç’°é€²åº¦ (å‡è¨­æ»¿åˆ†100)
        let percent = Math.min(Math.max(score, 0), 100);
        let color = '#4A148C';
        if(score < 0) color = '#c62828';
        else if(score > 80) color = '#D4AF37'; // é‡‘è‰²

        document.getElementById('score-ring').style.background = 
            `conic-gradient(${color} ${percent}%, #eee ${percent}% 100%)`;

        // æ›´æ–°è©•èª
        const comment = document.getElementById('score-comment');
        if(score >= 80) comment.innerText = "ğŸ‘‘ å¥³ç‹é™è‡¨ï¼ç‹€æ…‹æ¥µä½³";
        else if(score >= 50) comment.innerText = "âœ¨ ä¿æŒå„ªé›…ï¼Œç¹¼çºŒåŠªåŠ›";
        else if(score >= 0) comment.innerText = "ğŸ›¡ï¸ éœ€è¦åŠ å¼·é˜²ç¦¦";
        else comment.innerText = "âš ï¸ è­¦å ±ï¼è«‹ç«‹å³åœæ­¢ä½ä½è¡Œç‚º";

        // æ›´æ–° Log
        const logList = document.getElementById('score-log');
        logList.innerHTML = todayData.logs.map(l => 
            `<div class="log-item">
                <span>${l.action}</span>
                <span class="${l.points > 0 ? 'log-pos' : 'log-neg'}">${l.points > 0 ? '+' : ''}${l.points}</span>
             </div>`
        ).join('');

        // æ‰£åˆ†è¨ºæ–·
        const negatives = todayData.logs.filter(l => l.points < 0);
        const deductBox = document.getElementById('deduction-box');
        if(negatives.length > 0) {
            deductBox.style.display = 'block';
            document.getElementById('deduction-reason').innerText = negatives.map(n => n.action).join('ã€');
        } else {
            deductBox.style.display = 'none';
        }
    }

    function resetDaily() {
        if(confirm("ç¢ºå®šé‡ç½®ä»Šæ—¥æ‰€æœ‰æ•¸æ“šï¼Ÿ")) {
            todayData = resetDailyData();
            // é‡ç½® checkbox
            document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);
            saveData();
        }
    }

    // åˆå§‹åŒ–åŸ·è¡Œä¸€æ¬¡
    updateProfileUI();


    // --- 2. é é¢å°èˆª ---
    function navTo(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('page-' + pageId).classList.add('active');
        window.scrollTo(0,0);
        
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        // ç°¡å–®å°æ‡‰
        if(pageId === 'home') document.querySelectorAll('.nav-item')[0].classList.add('active');
        if(pageId === 'profile') document.querySelectorAll('.nav-item')[1].classList.add('active');
        if(pageId === 'invest') document.querySelectorAll('.nav-item')[2].classList.add('active');
        if(pageId === 'dojo') document.querySelectorAll('.nav-item')[3].classList.add('active');
    }

    // --- 3. ç›²ç›’å¿ƒæ³• ---
    const quotes = [
        "æˆ‘æ˜¯å®šåƒ¹ 450 çš„é™é‡ç›²ç›’ï¼Œå«Œè²´å°±åˆ¥è²·ã€‚", "ä¸è¦ç•¶å…è²»è©¦ç”¨å“ï¼Œè¦ç•¶éœ€é ç´„çš„å¥¢ä¾ˆå“ã€‚",
        "ç”·äººçš„æŠ±æ€¨æ˜¯æŠ•å…¥æˆæœ¬çš„é–‹å§‹ã€‚", "æ©Ÿç‡åªæœ‰ 1.4%ï¼Œä»–èƒ½ç´„åˆ°æˆ‘æ˜¯é‹æ°£å¥½ã€‚",
        "å¼·è€…å¾ä¸è‡ªè­‰ï¼Œåªçœ‹çµæœã€‚", "æº«æŸ”æ˜¯ä¿®é¤Šï¼Œä¸å¥½æƒ¹æ˜¯åŸå‰‡ã€‚",
        "éŒ¢åœ¨å“ªè£¡ï¼Œå¿ƒå°±åœ¨å“ªè£¡ã€‚", "çœ‹ä»–ç‚ºäº†å¦³æ”¾æ£„äº†ä»€éº¼ã€‚",
        "æƒ…ç·’ç©©å®šæ˜¯ç‚ºäº†è®“è‡ªå·±å„ªé›…ã€‚", "å°ä»–å¥½æ˜¯çå‹µï¼Œä¸æ˜¯ç¾©å‹™ã€‚",
        "å¦³çš„åº•ç·šæ±ºå®šäº†ä»–çš„ä¸Šé™ã€‚", "æ•¢æ–¼å¤±å»ï¼Œæ‰èƒ½çœŸæ­£æ“æœ‰ã€‚",
        "å¹´è–ª 400 è¬æ²’ç”¨ï¼Œé¡˜æ„èŠ±æ‰ç®—æ•¸ã€‚", "è¦åšä»–çš„åˆå¤¥äººï¼Œä¸åšè³¢å…§åŠ©ã€‚",
        "ä¿æŒ 30% çš„ç¥ç§˜æ„Ÿã€‚", "å¿™ç¢Œæ˜¯é«˜åƒ¹å€¼çš„è­‰æ˜ã€‚",
        "ç”·äººæ˜¯çµäººï¼Œçµç‰©ä¸è·³ç¶²ã€‚", "çœ‹æ‡‚æ•¸æ“šæ‰ä¸æœƒè¼¸ã€‚",
        "å¦³çš„æ™‚é–“æ¯”ä»–çš„éŒ¢æ›´è²´ã€‚", "æ²’é—œä¿‚æ˜¯åœ¨é™ä½èº«åƒ¹ã€‚",
        "æˆ’æ‰å°åƒåœ¾ç”·çš„åŒæƒ…ã€‚", "é¡åƒæ³•å‰‡ï¼šä»–å†·å¦³å°±å†·ã€‚",
        "ä¸è¦è§£é‡‹ã€‚", "ç¨ç«‹æ˜¯åº•æ°£ã€‚", "å¦³å€¼å¾—æœ€å¥½çš„ã€‚",
        "ç¯©é¸å¤§æ–¼æ”¹è®Šã€‚", "æ‰¿è«¾æ˜¯æœŸè²¨ï¼Œè¡Œå‹•æ˜¯ç¾è²¨ã€‚",
        "åšä¸€å€‹è®“ä»–æ€•å¤±å»çš„å¥³äººã€‚", "å¦³æ˜¯çå“ã€‚", "æˆ‘å¯ä»¥æ„›ä½ ï¼Œä¹Ÿå¯ä»¥æ›äº†ä½ ã€‚"
    ];
    function refreshQuote() {
        document.getElementById('daily-quote').innerText = '"' + quotes[Math.floor(Math.random() * quotes.length)] + '"';
    }
    refreshQuote();

    // --- 4. æŠ•è³‡è¨˜å¸³æœ¬ ---
    let investments = JSON.parse(localStorage.getItem('queen_investments')) || [];
    renderInvest();

    function addInvest() {
        const desc = document.getElementById('invest-desc').value;
        const val = document.getElementById('invest-val').value;
        const type = document.getElementById('invest-type').value;
        if(!desc || !val) return alert("è«‹å¡«å¯«å®Œæ•´");
        
        investments.unshift({ id: Date.now(), desc, type, val, date: new Date().toLocaleDateString() });
        localStorage.setItem('queen_investments', JSON.stringify(investments));
        
        updateScore('ç´€éŒ„æŠ•è³‡: ' + desc, 10); // åŠ åˆ†
        renderInvest();
        document.getElementById('invest-desc').value = '';
        document.getElementById('invest-val').value = '';
    }
    function renderInvest() {
        const list = document.getElementById('invest-history');
        if(investments.length === 0) { list.innerHTML = '<div style="color:#ccc;text-align:center;">å°šç„¡ç´€éŒ„</div>'; return; }
        list.innerHTML = investments.map(i => `<div style="padding:10px;background:white;margin-bottom:5px;border-radius:8px;display:flex;justify-content:space-between;"><span>${i.type==='money'?'ğŸ’¸':i.type==='time'?'â³':'â¤ï¸'} ${i.desc}</span><span style="color:green;font-weight:bold;">+${i.val}</span></div>`).join('');
    }

    // --- 5. è¨Šæ¯å¯©è¨ˆ ---
    function analyzeMessage() {
        const text = document.getElementById('msg-input').value;
        const fb = document.getElementById('msg-feedback');
        let err = [];
        if(text.length > 40) err.push("âš ï¸ å¤ªé•·äº†ï¼åˆªæ¸› 50%ã€‚");
        if(text.includes("æ‹œè¨—") || text.includes("æ²’é—œä¿‚")) err.push("âš ï¸ åµæ¸¬åˆ°ä½èƒ½é‡è©å½™ã€‚");
        if(text.includes("å› ç‚º") && text.length > 10) err.push("âš ï¸ ä¸è¦éåº¦è§£é‡‹ã€‚");
        
        if(!text) { fb.innerHTML = "ç­‰å¾…è¼¸å…¥..."; fb.style.background="transparent"; }
        else if(err.length === 0) { 
            fb.innerHTML = "âœ… å®Œç¾ï¼(+5åˆ†)"; fb.style.background="#E8F5E9"; fb.style.color="#2E7D32";
            if(!window.audited) { updateScore('ä½¿ç”¨è¨Šæ¯å¯©è¨ˆ', 5); window.audited=true; }
        } else { 
            fb.innerHTML = err.join("<br>"); fb.style.background="#FFEBEE"; fb.style.color="#C62828"; 
        }
    }

    // --- 6. å†·å‡åº« ---
    let timerInterval;
    function startFreeze(seconds) {
        clearInterval(timerInterval);
        const display = document.getElementById('timer-display');
        const msg = document.getElementById('freeze-msg');
        document.getElementById('btn-freeze-short').disabled = true;
        document.getElementById('btn-freeze-long').disabled = true;
        msg.style.display = 'block';
        
        updateScore('é–‹å•Ÿæƒ…ç·’å†·å‡', 5); // åŠ åˆ†

        timerInterval = setInterval(() => {
            seconds--;
            const h = Math.floor(seconds/3600).toString().padStart(2,'0');
            const m = Math.floor((seconds%3600)/60).toString().padStart(2,'0');
            const s = (seconds%60).toString().padStart(2,'0');
            display.innerText = `${h}:${m}:${s}`;
            
            if(seconds <= 0) {
                clearInterval(timerInterval);
                msg.style.display = 'none';
                document.getElementById('btn-freeze-short').disabled = false;
                document.getElementById('btn-freeze-long').disabled = false;
                alert("å†·å‡çµæŸï¼");
            }
        }, 1000);
    }

    // --- 7. é›·é” ---
    const checklistData = [
        { text: "å°æœå‹™å“¡/å¸æ©Ÿå‚²æ…¢", isRed: true }, { text: "è‚¢é«”è¶Šç•Œ", isRed: true },
        { text: "æƒ…ç·’å¤±æ§", isRed: true }, { text: "é–‹å£é–‰å£å‰ä»»", isRed: true },
        { text: "å€ŸéŒ¢/å¿˜å¸¶éŒ¢åŒ…", isRed: true }, { text: "ç„¡è¦åŠƒ", isRed: true },
        { text: "PUAæ‰“å£“", isRed: true }, { text: "è¿½è¹¤å¤§é‡ç¶²ç´…", isRed: true },
        { text: "ä¸»å‹•è²·å–®å¤§æ–¹", isRed: false }, { text: "è¨˜å¾—ç¿’æ…£", isRed: false },
        { text: "å…¬é–‹é—œä¿‚", isRed: false }, { text: "æœ‹å‹ç©©å®š", isRed: false },
        { text: "æ”¯æŒäº‹æ¥­", isRed: false }, { text: "ä¿¡å®ˆæ‰¿è«¾", isRed: false },
        { text: "å°Šé‡é‚Šç•Œ", isRed: false }
    ];
    const clContainer = document.getElementById('checklist-container');
    checklistData.forEach(item => {
        const div = document.createElement('div');
        div.className = 'checklist-item';
        div.innerHTML = `<input type="checkbox" onchange="calcRadar()" data-red="${item.isRed}"><span style="color:${item.isRed?'#D32F2F':'#388E3C'};font-weight:bold;">${item.isRed?'[ç´…æ——]':'[åŠ åˆ†]'}</span>&nbsp;${item.text}`;
        clContainer.appendChild(div);
    });
    function calcRadar() {
        const inputs = document.querySelectorAll('#checklist-container input:checked');
        let r=0, g=0; inputs.forEach(i => i.getAttribute('data-red')==='true'?r++:g++);
        const res = document.getElementById('radar-result'); res.style.display='block';
        if(r>0) { res.innerHTML = `âš ï¸ ç™¼ç¾ ${r} å€‹ç´…æ——ï¼å»ºè­°æ­¢æ`; res.style.background="#FFEBEE"; res.style.color="#C62828"; }
        else if(g>0) { res.innerHTML = `âœ… ç™¼ç¾ ${g} å€‹å„ªé»`; res.style.background="#E8F5E9"; res.style.color="#2E7D32"; }
        else res.style.display='none';
    }

    // --- 8. é“å ´ (50é¡Œ) ---
    const quizData = [
        { q: "é€±äº”æ™šä¸Š9é»ï¼Œä»–å‚³è¨Šï¼šã€Œè¦ä¸è¦å‡ºä¾†å–ä¸€æ¯ï¼Ÿã€", a: "âœ… æ­£è§£ï¼šã€ŒçœŸä¸å·§å·²ç¶“ä¼‘æ¯äº†ï¼Œä¸‹æ¬¡æ—©é»ç´„å–”ã€‚ã€" },
        { q: "ä»–å•ï¼šã€Œå¦³åœ¨å¹¹å˜›ï¼Ÿã€", a: "âœ… æ­£è§£ï¼šéš”30åˆ†å›ï¼šã€Œå‰›å¿™å®Œå¿ƒæƒ…ä¸éŒ¯ï¼Œä½ å‘¢ï¼Ÿã€" },
        { q: "ä»–å•ï¼šã€Œäº¤éå¹¾å€‹ç”·å‹ï¼Ÿã€", a: "âœ… æ­£è§£ï¼šã€Œé€™å¯æ˜¯ä»˜è²»å…§å®¹å–”ï¼Œç†Ÿä¸€é»å†èªªã€‚ã€" },
        { q: "ç´„æœƒæè­° AA åˆ¶ã€‚", a: "âœ… æ­£è§£ï¼šå¤§æ–¹ä»˜æ‰è‡ªå·±çš„ï¼Œç„¶å¾Œåˆªé™¤å¥½å‹ã€‚" },
        { q: "ä»–èªªï¼šã€Œæˆ‘é‚„ä¸æƒ³å®šä¸‹ä¾†ã€‚ã€", a: "âœ… æ­£è§£ï¼šã€ŒçœŸå·§ï¼Œæˆ‘ä¹Ÿé‚„åœ¨è§€å¯Ÿä½ ã€‚ã€" },
        { q: "é€äº†ä¸å–œæ­¡çš„ç¦®ç‰©ã€‚", a: "âœ… æ­£è§£ï¼šã€Œè¬è¬å¿ƒæ„ï¼ä½†æˆ‘æ¯”è¼ƒå¸¸ç”¨XXè‰²ï¼Œä¸‹æ¬¡å¯æ³¨æ„ï½ã€" },
        { q: "å…©å¤©æ²’æ¶ˆæ¯ã€‚", a: "âœ… æ­£è§£ï¼šä¸ä¸»å‹•è¯ç¹«ï¼Œéå¥½è‡ªå·±ç”Ÿæ´»ã€‚" },
        { q: "å°å¦³å†·æš´åŠ›ã€‚", a: "âœ… æ­£è§£ï¼šå¾¹åº•æ¶ˆå¤±ã€‚" },
        { q: "å•ï¼šã€Œæ²’éŒ¢äº†é‚„æ„›æˆ‘å—ï¼Ÿã€", a: "âœ… æ­£è§£ï¼šã€Œé‚£ä½ è¦åŠ æ²¹ï¼Œæˆ‘ä¸å¸Œæœ›ç™¼ç”Ÿã€‚ã€" },
        { q: "æƒ³æ‰¾ä»–æŠ±æ€¨ã€‚", a: "âœ… æ­£è§£ï¼šå»é‹å‹•æˆ–ç”¨å†·å‡åº«ã€‚" },
        { q: "å‚³è‡ªæ‹ç…§çµ¦å¦³ã€‚", a: "âœ… æ­£è§£ï¼šå›è¡¨æƒ…ç¬¦è™Ÿæˆ–ã€Œæ°£è‰²ä¸éŒ¯ã€ã€‚" },
        { q: "é–‹é»ƒè…”ã€‚", a: "âœ… æ­£è§£ï¼šä¸è®€ä¸å›ã€‚" },
        { q: "åŠå¤œä¸€é»å‚³ã€Œç¡äº†å—ã€ã€‚", a: "âœ… æ­£è§£ï¼šç„¡è¦–ï¼Œæ—©èµ·å†å›ã€‚" },
        { q: "å·²è®€ä¸å›å¾Œçªç„¶å›è¦†ã€‚", a: "âœ… æ­£è§£ï¼šéš”åŒæ¨£æ™‚é–“å†å›ï¼Œèªæ°£å¹³æ·¡ã€‚" },
        { q: "å•ã€Œå¦³å–œæ­¡æˆ‘å—ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œç›®å‰æ„Ÿè¦ºä¸éŒ¯ï¼Œçœ‹ä½ è¡¨ç¾ã€‚ã€" },
        { q: "é²åˆ°20åˆ†é˜æ²’èªªã€‚", a: "âœ… æ­£è§£ï¼š15åˆ†æ™‚é›¢é–‹ã€‚" },
        { q: "æ”¹ç´„å®¶è£¡ã€‚", a: "âœ… æ­£è§£ï¼šã€Œç¿’æ…£ç´„å¤–é¢ï¼Œé‚„æ˜¯å»é¤å»³å§ã€‚ã€" },
        { q: "ç´„æœƒä¸€ç›´çœ‹æ‰‹æ©Ÿã€‚", a: "âœ… æ­£è§£ï¼šå¾®ç¬‘åœä¸‹ä¸èªªè©±ï¼Œçœ‹è‘—ä»–ã€‚" },
        { q: "ç´„åƒè·¯é‚Šæ”¤ã€‚", a: "âœ… æ­£è§£ï¼šã€Œç©¿é«˜è·Ÿé‹ä¸æ–¹ä¾¿ï¼Œæ›å€‹åœ°æ–¹ï¼Ÿã€" },
        { q: "èªªã€Œå¦³å¤ªå¼·å‹¢ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæˆ‘å°å€¼å¾—çš„äººå¾ˆæº«æŸ”ã€‚ã€" },
        { q: "å«Œå¦³è£™å­çŸ­ã€‚", a: "âœ… æ­£è§£ï¼šã€Œé¡¯å¾—è…¿é•·å•Šï¼Œå¥½çœ‹å—ï¼Ÿã€" },
        { q: "èª‡åˆ¥çš„å¥³ç”Ÿã€‚", a: "âœ… æ­£è§£ï¼šã€Œæ˜¯å–”ï¼Œè »æ¼‚äº®çš„ã€‚ã€(æ·¡å®š)" },
        { q: "è¦æ€§æ„Ÿç…§ã€‚", a: "âœ… æ­£è§£ï¼šã€Œåªçµ¦ç”·å‹çœ‹è€¶ã€‚ã€" },
        { q: "ç•™å‰ä»»ç…§ç‰‡ã€‚", a: "âœ… æ­£è§£ï¼šè§€å¯Ÿï¼Œä¸å°Šé‡å°±æ›äººã€‚" },
        { q: "å•ã€Œç‚ºä½•å–®èº«ã€ã€‚", a: "âœ… æ­£è§£ï¼šã€Œå› ç‚ºæˆ‘è¦æ±‚å¾ˆé«˜å‘€ã€‚ã€" },
        { q: "èª‡å¦³æ‡‚äº‹ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæ˜¯å—ï¼Ÿæˆ‘æœ‰æ™‚å€™å¾ˆä»»æ€§å–”ã€‚ã€" },
        { q: "èªªè‡ªå·±å¿™ã€‚", a: "âœ… æ­£è§£ï¼šå¾Œæ’¤ï¼Œä¸ç•™æ™‚é–“çµ¦ä»–ã€‚" },
        { q: "å¼å¦³æ‘”æ±è¥¿ã€‚", a: "âœ… æ­£è§£ï¼šé›¢é–‹ï¼Œè€ƒæ…®åˆ†æ‰‹ã€‚" },
        { q: "å˜²ç¬‘å¦³èˆˆè¶£ã€‚", a: "âœ… æ­£è§£ï¼šã€Œé€™æ˜¯æˆ‘çš„æ¨‚è¶£ï¼Œè«‹å°Šé‡ã€‚ã€" },
        { q: "è®“å¦³å«‰å¦’ã€‚", a: "âœ… æ­£è§£ï¼šã€Œé‚£ä½ è¦æ’éšŠå–”ã€‚ã€" },
        { q: "å¤šç·šæ›–æ˜§ã€‚", a: "âœ… æ­£è§£ï¼šç›´æ¥å†·æ‰æ›äººã€‚" },
        { q: "åˆ†æ‰‹æƒ³ç•¶æœ‹å‹ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæˆ‘ä¸ç¼ºæœ‹å‹ã€‚ã€" },
        { q: "æœ‹å‹é¢å‰æå¦³ã€‚", a: "âœ… æ­£è§£ï¼šã€Œé€™ä¸å¥½ç¬‘ã€‚ã€" },
        { q: "èªªå‰ä»»ç˜‹å­ã€‚", a: "âœ… æ­£è§£ï¼šè­¦æƒ•ã€‚" },
        { q: "å«Œå¦³èº«æã€‚", a: "âœ… æ­£è§£ï¼šã€Œä¸å–œæ­¡é–€åœ¨é‚£é‚Šã€‚ã€" },
        { q: "å¿˜è¨˜ç´€å¿µæ—¥ã€‚", a: "âœ… æ­£è§£ï¼šæé†’ä¸€æ¬¡ï¼Œå†çŠ¯å°±ç½°ã€‚" },
        { q: "å¾ˆä¹…æ²’èª‡å¦³ã€‚", a: "âœ… æ­£è§£ï¼šæ‰“æ‰®æ¼‚äº®å‡ºå»ç©ã€‚" },
        { q: "è·Ÿå¦³å€ŸéŒ¢ã€‚", a: "âœ… æ­£è§£ï¼šã€ŒåŸå‰‡ä¸Šä¸å€ŸéŒ¢ã€‚ã€" },
        { q: "é—œä¿‚è®“å¦³æ²’è‡ªä¿¡ã€‚", a: "âœ… æ­£è§£ï¼šé›¢é–‹ã€‚" },
        { q: "æ¢ä»¶å¥½ä½†å°å¦³å·®ã€‚", a: "âœ… æ­£è§£ï¼šæ”¾æ‰‹ã€‚" },
        { q: "è¦ªå‹åå°ã€‚", a: "âœ… æ­£è§£ï¼šå†·éœåƒè€ƒã€‚" },
        { q: "èªªé…ä¸ä¸Šå¦³ã€‚", a: "âœ… æ­£è§£ï¼šé›¢é–‹ã€‚" },
        { q: "åªæœ‰å¦³åŠªåŠ›ã€‚", a: "âœ… æ­£è§£ï¼šåœæ­¢åˆ’æ§³ã€‚" },
        { q: "èªªå¦³è®Šäº†ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæˆ‘æ›´å–œæ­¡ç¾åœ¨çš„è‡ªå·±ã€‚ã€" },
        { q: "æƒ³è¦–å§¦ç¤¾ç¾¤ã€‚", a: "âœ… æ­£è§£ï¼šå°é–ã€‚" },
        { q: "çœ‹åˆ°å¸¥å“¥ã€‚", a: "âœ… æ­£è§£ï¼šå¤§æ–¹æ¬£è³ã€‚" },
        { q: "æ²’ç´„è¡Œç¨‹ã€‚", a: "âœ… æ­£è§£ï¼šã€Œæˆ‘å·²æœ‰å®‰æ’ã€‚ã€" },
        { q: "æƒ³ä»–äº†ã€‚", a: "âœ… æ­£è§£ï¼šå‚³æœ‰è¶£ç…§ç‰‡èª˜é¤Œã€‚" },
        { q: "å¦³æ˜¯èª°ï¼Ÿ", a: "âœ… æ­£è§£ï¼šå®šåƒ¹ 450 çš„é™é‡ç›²ç›’ã€‚" }
    ];
    let quizIdx = 0;
    function renderQuiz() {
        document.getElementById('dojo-q').innerText = quizData[quizIdx].q;
        document.getElementById('dojo-a').innerText = quizData[quizIdx].a;
        document.getElementById('dojo-a').style.display = 'none';
        document.getElementById('quiz-counter').innerText = (quizIdx+1)+'/'+quizData.length;
        document.getElementById('btn-show-ans').style.display = 'inline-block';
    }
    function showAnswer() { 
        document.getElementById('dojo-a').style.display = 'block'; 
        document.getElementById('btn-show-ans').style.display = 'none';
        // åˆ·é¡ŒåŠ åˆ†æ©Ÿåˆ¶ (é˜²æ­¢é‡è¤‡åˆ·åŒä¸€é¡Œ)
        if(!quizData[quizIdx].done) {
            updateScore('é“å ´åˆ·é¡Œ', 5);
            quizData[quizIdx].done = true;
        }
    }
    function nextQuiz(d) {
        quizIdx += d;
        if(quizIdx < 0) quizIdx = quizData.length-1;
        if(quizIdx >= quizData.length) quizIdx = 0;
        renderQuiz();
    }
    renderQuiz();
</script>

</body>
</html>